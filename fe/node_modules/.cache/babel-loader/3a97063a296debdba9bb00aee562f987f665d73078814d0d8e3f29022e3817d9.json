{"ast":null,"code":"import _classPrivateFieldInitSpec from \"/home/bahl/MinhajMeraj/Dev Work/Frontend/Portals/EPRC/UseCases/tlr_eprc_sprc_inq_uc3_rpt_eprc/fe/node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js\";\nimport _classPrivateFieldGet from \"/home/bahl/MinhajMeraj/Dev Work/Frontend/Portals/EPRC/UseCases/tlr_eprc_sprc_inq_uc3_rpt_eprc/fe/node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet.js\";\nimport _classPrivateFieldSet from \"/home/bahl/MinhajMeraj/Dev Work/Frontend/Portals/EPRC/UseCases/tlr_eprc_sprc_inq_uc3_rpt_eprc/fe/node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { useStore } from \"vuex\";\nimport { onBeforeRouteLeave, useRouter, useRoute } from 'vue-router';\nimport { h, defineComponent, resolveDynamicComponent, mergeProps, toHandlers, onBeforeMount, onBeforeUnmount, getCurrentInstance, shallowRef, ref, isRef, computed, toValue, Fragment } from 'vue';\nfunction isNil(value) {\n  return value === undefined || value === null;\n}\nfunction isString(value) {\n  return typeof value === 'string';\n}\nfunction isObject(value) {\n  return typeof value === 'object';\n}\nfunction isNilOrEmpty(val) {\n  return !(typeof val === 'string' && val !== '');\n}\n// Loader Component - render function\nconst Loader = h('div', {\n  style: 'min-height:100px;'\n}, '');\n// FSM Response Error Class\nclass FsmResponseError extends Error {\n  constructor(response) {\n    super(response.data.errorMessage);\n    this.name = \"FsmResponseError\";\n    this.response = response;\n  }\n  static assertError(response) {\n    if (!isObject(response) || typeof response.status !== 'number') {\n      throw new Error('Invalid FSM Response');\n    } else if (response.status !== 200) {\n      throw new Error(`Invalid FSM Response Status Code: ${response.status}`);\n    } else if (!isObject(response.data)) {\n      throw new Error('Invalid FSM Response Data');\n    } else if (response.data.mBoolean === true) {\n      throw new FsmResponseError(response);\n    }\n  }\n}\n/****FSM AJAX Class**: The *axios* wrapper class for posting **FSM transition** requests*/\nvar _url = /*#__PURE__*/new WeakMap();\nvar _activityCode = /*#__PURE__*/new WeakMap();\nvar _subActivityCode = /*#__PURE__*/new WeakMap();\nvar _batchRequired = /*#__PURE__*/new WeakMap();\nclass FsmAjax {\n  // Private Fields\n  /** Creates an instance of FsmAjax class\n   * @param { { fsmUrl: String , batchRequired: Boolean, activityCode?: String | undefined, subActivityCode?: String | undefined } } config UseCase Config  */\n  constructor({\n    fsmUrl,\n    batchRequired,\n    activityCode,\n    subActivityCode\n  }) {\n    _classPrivateFieldInitSpec(this, _url, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _activityCode, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _subActivityCode, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _batchRequired, {\n      writable: true,\n      value: void 0\n    });\n    if (isNilOrEmpty(fsmUrl)) {\n      throw new Error('Invalid FSM URL');\n    } else if (typeof batchRequired !== 'boolean') {\n      throw new Error('Invalid Batch Required value');\n    } else if (!isNil(activityCode) && !isString(activityCode)) {\n      throw new Error('Invalid FSM Activity Code');\n    } else if (!isNil(subActivityCode) && !isString(subActivityCode)) {\n      throw new Error('Invalid FSM Sub Activity Code');\n    }\n    _classPrivateFieldSet(this, _url, fsmUrl);\n    _classPrivateFieldSet(this, _batchRequired, batchRequired);\n    _classPrivateFieldSet(this, _activityCode, activityCode !== null && activityCode !== void 0 ? activityCode : '');\n    _classPrivateFieldSet(this, _subActivityCode, subActivityCode !== null && subActivityCode !== void 0 ? subActivityCode : '');\n  }\n  /** Gets FSM URL */\n  get url() {\n    return _classPrivateFieldGet(this, _url);\n  }\n  /** Gets whether Batch Required */\n  get batchRequired() {\n    return _classPrivateFieldGet(this, _batchRequired);\n  }\n  /** Gets Activity Code */\n  get activityCode() {\n    return _classPrivateFieldGet(this, _activityCode);\n  }\n  /** Gets Sub-Activity Code */\n  get subActivityCode() {\n    return _classPrivateFieldGet(this, _subActivityCode);\n  }\n  /** Posts FSM transition\n   * @param {string} transition The FSM Transition\n   * @param {object} [data] The payload data\n   * @returns {Promise<object>} Returns response data (asynchronously) */\n  async post(transition, data) {\n    if (isNilOrEmpty(transition)) {\n      throw new Error('Invalid FSM Transition');\n    } else if (!isNil(data) && !isObject(data)) {\n      throw new Error('Invalid FSM Data');\n    }\n    const payloadset = {\n      transition,\n      data: data !== null && data !== void 0 ? data : {}\n    };\n    const response = await axios.post(_classPrivateFieldGet(this, _url), payloadset);\n    FsmResponseError.assertError(response);\n    return response.data;\n  }\n  /** Posts FSM **`INIT`** transition\n   * @returns {Promise<object>} Returns **`INIT`** response data (asynchronously) */\n  postInit() {\n    var header = FsmAjax.header;\n    header.activityCode = this.activityCode;\n    header.subActivityCode = this.subActivityCode;\n    return this.post('INIT', {\n      header\n    });\n  }\n  /** Posts FSM **`KILL`** transition\n   * @returns {Promise<object>} Returns **`KILL`** response data (asynchronously) */\n  postKill() {\n    return this.post('KILL');\n  }\n  /** Gets header for **`INIT`** transition */\n  static get header() {\n    var _useStore$getters$get, _useStore, _useStore$getters;\n    return (_useStore$getters$get = (_useStore = useStore()) === null || _useStore === void 0 ? void 0 : (_useStore$getters = _useStore.getters) === null || _useStore$getters === void 0 ? void 0 : _useStore$getters.getHeaders) !== null && _useStore$getters$get !== void 0 ? _useStore$getters$get : {};\n  }\n  /** Determines whether specified error is an instance of FSM Response Error or not\n   * @param {Error} error The Error to evaluate\n   * @returns Whether error is an instance of FSM Response Error */\n  static isFsmError(error) {\n    return typeof error === 'object' && error instanceof FsmResponseError;\n  }\n  /** Extracts data from FSM Response Error\n   * @param {FsmResponseError} error The FSM Response Error\n   * @returns {object|undefined} The extracted data */\n  static pluckErrorData(error) {\n    return FsmAjax.isFsmError(error) ? error.response.data : undefined;\n  }\n}\n/** Composable method for UseCase Higher Order Components (UCHOC)\n * @param {object} config The UseCase config object\n * @param {Array<object>} views An array of MegaSet-Views' objects \n * @param {function} onInitialized An Initialization callback method\n * @param {function} onError An Error callback method\n * @returns Returns `activateView`, `close` and `render` methods */\nfunction useUseCaseViewManager(config, views, onInitialized, onError, initView = '') {\n  if (!isObject(config) || isNilOrEmpty(config.fsmUrl)) {\n    throw new Error('Invalid UseCase Config Object');\n  }\n  if (!Array.isArray(views) || views.length === 0) {\n    throw new Error('Invalid UseCase Views Array');\n  }\n  if (typeof onInitialized !== 'function') {\n    throw new Error('Invalid UseCase onInitialized Callback Function');\n  }\n  if (typeof onError !== 'function') {\n    throw new Error('Invalid UseCase onError Callback Function');\n  }\n  const usecase = getCurrentInstance(); // Instance of UseCase HOC\n  if (!!!usecase) {\n    throw new Error('Unable to get UseCase Instance');\n  }\n  // Template Refs\n  const $refs = ref({});\n  // UseCase Views Collection\n  const ucViews = views.reduce(function (collection, view) {\n    // Validate View Definition\n    if (!isObject(view) ||\n    // View must be defined as an Object\n    isNilOrEmpty(view.name) ||\n    // View must have valid name\n    isNilOrEmpty(toValue(view.title)) ||\n    // View must have valid title\n    view.component === undefined && view.components === undefined ||\n    // At least one should be defined\n    view.components === undefined && !isObject(view.component) || view.component === undefined && !Array.isArray(view.components) || isObject(view.component) && (view.components !== undefined || !isObject(view.props) || !isNil(view.handlers) && !isObject(view.handlers)) || Array.isArray(view.components) && (view.component !== undefined || view.components.length === 0 || view.components.some(x => isNilOrEmpty(x.ref)) || view.components.some(x => !isObject(x.props)) || view.components.some(x => !isNil(x.handlers) && !isObject(x.handlers)))) {\n      throw new Error('Invalid UseCase View definition');\n    }\n    // Uniqueness Check\n    if (collection.has(view.name)) {\n      throw new Error(`UseCase view with spcified name \"${view.name}\" already exists`);\n    }\n    if (isObject(view.component)) {\n      // Define Template Ref\n      view.props.ref = defineTemplateRef(view);\n      // Add view definition to collection        \n      collection.set(view.name, {\n        name: view.name,\n        $ref: ref(null),\n        title: view.title,\n        component: shallowRef(view.component),\n        props: view.props,\n        handlers: view.handlers || {}\n      });\n    } else if (Array.isArray(view.components)) {\n      const components = view.components.map(function (child) {\n        child.props.ref = defineChildTemplateRef(view, child);\n        return {\n          component: shallowRef(child.component),\n          props: child.props,\n          handlers: child.handlers || {}\n        };\n      });\n      // Add view definition to collection        \n      collection.set(view.name, {\n        name: view.name,\n        title: view.title,\n        $refs: {},\n        components\n      });\n    } else {\n      throw new Error('Invalid UseCase View Type');\n    }\n    return collection;\n  }, new Map());\n  function defineTemplateRef(viewDef) {\n    const setRef = function (node) {\n      const view = ucViews.get(viewDef.name);\n      view.$ref.value = node;\n      $refs.value[`ref${viewDef.name}`] = node;\n    };\n    return setRef;\n  }\n  function defineChildTemplateRef(viewDef, childDef) {\n    const setRef = function (node) {\n      const view = ucViews.get(viewDef.name);\n      view.$refs[childDef.ref] = node;\n      $refs.value[childDef.ref] = node;\n    };\n    return setRef;\n  }\n  // Add-Ons: Vuex Store, Router and Route\n  const vuexStore = useStore(),\n    router = useRouter(),\n    route = useRoute();\n  // FSM AJAX api\n  const fsm = new FsmAjax(config);\n  // Loader View (definition)\n  const loaderView = {\n    title: '',\n    component: Loader,\n    props: {},\n    handlers: {}\n  };\n  // Active View\n  const theActiveView = ref(ucViews.has(initView !== null && initView !== void 0 ? initView : '') ? ucViews.get(initView) : loaderView);\n  /** Activates specified MegaSetg View\n   * @param {string} view The MegaSet view name */\n  function activateView(view) {\n    if (!ucViews.has(view)) {\n      throw new Error(`View to activate \"${view}\" does not exist`);\n    }\n    theActiveView.value = ucViews.get(view);\n    if (usecase.props.modal === true) {\n      usecase.emit('update:title', theActiveView.value.title);\n    } else if (isRef(route.meta.title)) {\n      route.meta.title.value = theActiveView.value.title;\n    }\n  }\n  // Dispose Flag\n  const disposing = ref(false);\n  const killFsmOnClose = ref(false);\n  function routeLeaving(to, from, next) {\n    var _from$meta$killFsmOnC, _from$meta;\n    killFsmOnClose.value = toValue((_from$meta$killFsmOnC = from === null || from === void 0 ? void 0 : (_from$meta = from.meta) === null || _from$meta === void 0 ? void 0 : _from$meta.killFsmOnClose) !== null && _from$meta$killFsmOnC !== void 0 ? _from$meta$killFsmOnC : false);\n    next();\n  }\n  // Dispose Method\n  async function dispose() {\n    if (vuexStore.getters.getURL === config.fsmUrl) {\n      vuexStore.dispatch(\"fsmURL\", null);\n      vuexStore.dispatch(\"activityCode\", '');\n      vuexStore.dispatch(\"subActivityCode\", '');\n    }\n    if (disposing.value === true) {\n      return;\n    }\n    try {\n      disposing.value = true;\n      if (killFsmOnClose.value === true || usecase.props.modal === true) {\n        await fsm.postKill();\n      }\n    } catch (error) {\n      onError(error, 'Dispose');\n    }\n  }\n  /** Closes UseCase HOC\n   * @param {boolean} kill Whether to post FSM `KILL` transition on disposal */\n  function close(kill = true) {\n    if (kill === false && disposing.value === false) {\n      disposing.value = true;\n    }\n    if (usecase.props.modal === true) {\n      usecase.emit('closing');\n    } else {\n      router.go(-1);\n    }\n  }\n  // Initialize Usecase\n  async function initialize() {\n    // Flag to tolerate FSM Errors\n    const tolerate = typeof config.tolerateInit === 'boolean' ? config.tolerateInit : false;\n    try {\n      if (fsm.batchRequired && typeof FsmAjax.header.loginUserBatch !== 'number') {\n        throw new Error('Batch is not Open, Open a Batch');\n      }\n      if (usecase.props.modal === true) {\n        usecase.emit('update:title', theActiveView.value.title);\n      } else {\n        vuexStore.dispatch(\"fsmURL\", config.fsmUrl);\n        if (isRef(route.meta.title)) {\n          route.meta.title.value = theActiveView.value.title;\n        }\n      }\n      const data = await fsm.postInit();\n      onInitialized(data);\n    } catch (error) {\n      disposing.value = true;\n      onError(error, 'Initialize');\n      if (!FsmAjax.isFsmError(error) || !tolerate) {\n        close();\n      }\n    }\n  }\n  // Reinitialize UseCase    \n  async function reinitialize() {\n    try {\n      await fsm.postKill();\n    } catch (error) {\n      onError(error, 'Kill');\n      return;\n    }\n    initialize();\n  }\n  // UseCase Render Function\n  function render(_ctx, _cache) {\n    if (Array.isArray(theActiveView.value.components)) {\n      return h(Fragment, null, theActiveView.value.components.map(function (item) {\n        return h(resolveDynamicComponent(item.component), mergeProps(item.props, toHandlers(item.handlers)));\n      }));\n    } else {\n      return h(resolveDynamicComponent(theActiveView.value.component), mergeProps(theActiveView.value.props, toHandlers(theActiveView.value.handlers)));\n    }\n  }\n  // Life Cycle Hooks    \n  onBeforeMount(initialize);\n  onBeforeUnmount(dispose);\n  onBeforeRouteLeave(routeLeaving);\n  // The Active View\n  const activeView = computed(function () {\n    if (!!theActiveView.value && !!theActiveView.value.name) {\n      return {\n        name: theActiveView.value.name,\n        $ref: theActiveView.value.$ref\n      };\n    } else {\n      return undefined;\n    }\n  });\n  // Return Methods\n  return {\n    activateView,\n    close,\n    render,\n    reinitialize,\n    activeView,\n    $refs: computed(() => $refs.value)\n  };\n}\n/** Defines UseCase HOC\n * @param {string} name UseCase HOC name\n * @param {function} setup UseCase HOC setup method\n * @returns UseCase HOC */\nfunction defineUseCaseComponent(name, setup) {\n  if (isNilOrEmpty(name) || typeof setup !== 'function') {\n    throw new Error('Invalid UseCase Component definition');\n  }\n  return defineComponent(setup, {\n    name,\n    props: {\n      fsmUrl: {\n        type: String,\n        required: true\n      },\n      modal: {\n        type: Boolean,\n        default: false\n      },\n      title: {\n        type: String,\n        default: ''\n      }\n    },\n    emits: ['update:title', 'closing']\n  });\n}\n/** Defines UseCase Loader function\n * @param {string} name UseCase HOC name\n * @param {function} setup UseCase HOC setup method\n * @returns {function} UseCase Loader Function */\nfunction defineUseCaseLoader(name, setup) {\n  function loader(ctx, fsmUrl) {\n    const router = ctx.$router;\n    if (router.hasRoute(name)) {\n      router.removeRoute(name);\n    }\n    router.addRoute({\n      path: `/${name}`,\n      name,\n      component: defineUseCaseComponent(name, setup),\n      props: {\n        fsmUrl\n      },\n      meta: {\n        title: ref(''),\n        killFsmOnClose: ref(true),\n        hideSideNavMenu: true\n      }\n    });\n    router.push({\n      name\n    });\n  }\n  return loader;\n}\nexport { FsmAjax, useUseCaseViewManager, defineUseCaseComponent, defineUseCaseLoader };","map":{"version":3,"names":["axios","useStore","onBeforeRouteLeave","useRouter","useRoute","h","defineComponent","resolveDynamicComponent","mergeProps","toHandlers","onBeforeMount","onBeforeUnmount","getCurrentInstance","shallowRef","ref","isRef","computed","toValue","Fragment","isNil","value","undefined","isString","isObject","isNilOrEmpty","val","Loader","style","FsmResponseError","Error","constructor","response","data","errorMessage","name","assertError","status","mBoolean","_url","WeakMap","_activityCode","_subActivityCode","_batchRequired","FsmAjax","fsmUrl","batchRequired","activityCode","subActivityCode","_classPrivateFieldInitSpec","writable","_classPrivateFieldSet","url","_classPrivateFieldGet","post","transition","payloadset","postInit","header","postKill","_useStore$getters$get","_useStore","_useStore$getters","getters","getHeaders","isFsmError","error","pluckErrorData","useUseCaseViewManager","config","views","onInitialized","onError","initView","Array","isArray","length","usecase","$refs","ucViews","reduce","collection","view","title","component","components","props","handlers","some","x","has","defineTemplateRef","set","$ref","map","child","defineChildTemplateRef","Map","viewDef","setRef","node","get","childDef","vuexStore","router","route","fsm","loaderView","theActiveView","activateView","modal","emit","meta","disposing","killFsmOnClose","routeLeaving","to","from","next","_from$meta$killFsmOnC","_from$meta","dispose","getURL","dispatch","close","kill","go","initialize","tolerate","tolerateInit","loginUserBatch","reinitialize","render","_ctx","_cache","item","activeView","defineUseCaseComponent","setup","type","String","required","Boolean","default","emits","defineUseCaseLoader","loader","ctx","$router","hasRoute","removeRoute","addRoute","path","hideSideNavMenu","push"],"sources":["/home/bahl/MinhajMeraj/Dev Work/Frontend/Portals/EPRC/UseCases/tlr_eprc_sprc_inq_uc3_rpt_eprc/fe/node_modules/@teresol-v2/usecase-hoc/lib/UseCaseUtils.js"],"sourcesContent":["import axios from 'axios';\nimport { useStore } from \"vuex\";\nimport { onBeforeRouteLeave, useRouter, useRoute } from 'vue-router';\nimport { \n    h, \n    defineComponent, \n    resolveDynamicComponent, \n    mergeProps, \n    toHandlers, \n    onBeforeMount, \n    onBeforeUnmount, \n    getCurrentInstance, \n    shallowRef, \n    ref, \n    isRef, \n    computed, \n    toValue,\n    Fragment    \n} from 'vue';\nfunction isNil(value) { return (value === undefined || value === null); }\nfunction isString(value) { return (typeof value === 'string'); }\nfunction isObject(value) { return (typeof value === 'object'); }\nfunction isNilOrEmpty(val) { return !(typeof val === 'string' && val !== ''); }\n// Loader Component - render function\nconst Loader = h('div', { style: 'min-height:100px;' }, '');\n// FSM Response Error Class\nclass FsmResponseError extends Error {\n    constructor(response) {\n        super(response.data.errorMessage);\n        this.name = \"FsmResponseError\";\n        this.response = response;\n    }\n    static assertError(response) {\n        if (!isObject(response) || typeof response.status !== 'number') { throw new Error('Invalid FSM Response'); } \n        else if (response.status !== 200) { throw new Error(`Invalid FSM Response Status Code: ${response.status}`); } \n        else if (!isObject(response.data)) { throw new Error('Invalid FSM Response Data'); } \n        else if (response.data.mBoolean === true) { throw new FsmResponseError(response); }\n    }\n}\n/****FSM AJAX Class**: The *axios* wrapper class for posting **FSM transition** requests*/\nclass FsmAjax {\n    #_url; #_activityCode; #_subActivityCode; #_batchRequired; // Private Fields\n    /** Creates an instance of FsmAjax class\n     * @param { { fsmUrl: String , batchRequired: Boolean, activityCode?: String | undefined, subActivityCode?: String | undefined } } config UseCase Config  */\n    constructor({ fsmUrl, batchRequired, activityCode, subActivityCode }) {\n        if (isNilOrEmpty(fsmUrl)) { throw new Error('Invalid FSM URL'); } \n        else if (typeof batchRequired !== 'boolean') { throw new Error('Invalid Batch Required value'); } \n        else if (!isNil(activityCode) && !isString(activityCode)) { throw new Error('Invalid FSM Activity Code'); } \n        else if (!isNil(subActivityCode) && !isString(subActivityCode)) { throw new Error('Invalid FSM Sub Activity Code'); }\n        this.#_url = fsmUrl;\n        this.#_batchRequired = batchRequired;\n        this.#_activityCode = activityCode ?? '';\n        this.#_subActivityCode = subActivityCode ?? '';\n    }\n    /** Gets FSM URL */\n    get url() { return this.#_url; }\n    /** Gets whether Batch Required */\n    get batchRequired() { return this.#_batchRequired; }\n    /** Gets Activity Code */\n    get activityCode() { return this.#_activityCode; }\n    /** Gets Sub-Activity Code */\n    get subActivityCode() { return this.#_subActivityCode; }    \n    /** Posts FSM transition\n     * @param {string} transition The FSM Transition\n     * @param {object} [data] The payload data\n     * @returns {Promise<object>} Returns response data (asynchronously) */\n    async post(transition, data) {\n        if (isNilOrEmpty(transition)) { throw new Error('Invalid FSM Transition'); } \n        else if (!isNil(data) && !isObject(data)) { throw new Error('Invalid FSM Data'); }\n        const payloadset = { transition, data: data ?? {} };\n        const response = await axios.post(this.#_url, payloadset);\n        FsmResponseError.assertError(response);\n        return response.data;\n    }\n    /** Posts FSM **`INIT`** transition\n     * @returns {Promise<object>} Returns **`INIT`** response data (asynchronously) */\n    postInit() {\n        var header = FsmAjax.header;\n        header.activityCode = this.activityCode;\n        header.subActivityCode = this.subActivityCode;\n        return this.post('INIT', { header });\n    }\n    /** Posts FSM **`KILL`** transition\n     * @returns {Promise<object>} Returns **`KILL`** response data (asynchronously) */\n    postKill() { return this.post('KILL'); }\n    /** Gets header for **`INIT`** transition */\n    static get header() { return useStore()?.getters?.getHeaders ?? {}; }\n    /** Determines whether specified error is an instance of FSM Response Error or not\n     * @param {Error} error The Error to evaluate\n     * @returns Whether error is an instance of FSM Response Error */\n    static isFsmError(error) { return (typeof error === 'object' && error instanceof FsmResponseError); }\n    /** Extracts data from FSM Response Error\n     * @param {FsmResponseError} error The FSM Response Error\n     * @returns {object|undefined} The extracted data */\n    static pluckErrorData(error) { return FsmAjax.isFsmError(error) ? error.response.data : undefined; }\n}\n/** Composable method for UseCase Higher Order Components (UCHOC)\n * @param {object} config The UseCase config object\n * @param {Array<object>} views An array of MegaSet-Views' objects \n * @param {function} onInitialized An Initialization callback method\n * @param {function} onError An Error callback method\n * @returns Returns `activateView`, `close` and `render` methods */\nfunction useUseCaseViewManager(config, views, onInitialized, onError, initView = '') {\n    if (!isObject(config) || isNilOrEmpty(config.fsmUrl)) { throw new Error('Invalid UseCase Config Object'); }\n    if (!Array.isArray(views) || views.length === 0) { throw new Error('Invalid UseCase Views Array'); }\n    if ( typeof onInitialized !== 'function') { throw new Error('Invalid UseCase onInitialized Callback Function'); }\n    if ( typeof onError !== 'function') { throw new Error('Invalid UseCase onError Callback Function'); }\n    const usecase = getCurrentInstance(); // Instance of UseCase HOC\n    if (!!!usecase) { throw new Error('Unable to get UseCase Instance'); }    \n    // Template Refs\n    const $refs = ref({});\n    // UseCase Views Collection\n    const ucViews = views.reduce(function(collection, view) {\n        // Validate View Definition\n        if (!isObject(view) || // View must be defined as an Object\n            isNilOrEmpty(view.name) || // View must have valid name\n            isNilOrEmpty(toValue(view.title)) || // View must have valid title\n            (view.component === undefined && view.components === undefined) || // At least one should be defined\n            (view.components === undefined && !isObject(view.component)) ||\n            (view.component === undefined && !Array.isArray(view.components)) || \n            (isObject(view.component) && (view.components !== undefined ||\n                !isObject(view.props) || (!isNil(view.handlers) && !isObject(view.handlers))\n            )) ||\n            (Array.isArray(view.components) && (view.component !== undefined ||\n                    view.components.length === 0 ||\n                    view.components.some(x => isNilOrEmpty(x.ref)) ||\n                    view.components.some(x => !isObject(x.props)) ||\n                    view.components.some(x => !isNil(x.handlers) && !isObject(x.handlers))\n            ))\n        ) { throw new Error('Invalid UseCase View definition'); }        \n        // Uniqueness Check\n        if (collection.has(view.name)) { throw new Error(`UseCase view with spcified name \"${view.name}\" already exists`); }\n        \n        if (isObject(view.component)) {            \n            // Define Template Ref\n            view.props.ref = defineTemplateRef(view);\n            // Add view definition to collection        \n            collection.set(view.name, { \n                name: view.name,\n                $ref: ref(null),\n                title: view.title, \n                component: shallowRef(view.component), \n                props: view.props, \n                handlers: view.handlers || {} \n            });\n        } else if(Array.isArray(view.components)) {            \n            const components = view.components.map(function(child){\n                child.props.ref = defineChildTemplateRef(view, child);\n                return {\n                    component: shallowRef(child.component), \n                    props: child.props, \n                    handlers: child.handlers || {}\n                };\n            });\n            // Add view definition to collection        \n            collection.set(view.name, { \n                name: view.name,\n                title: view.title, \n                $refs: {},                \n                components\n            });\n        } else { throw new Error('Invalid UseCase View Type'); }        \n        return collection;\n    }, new Map());\n    function defineTemplateRef(viewDef) {\n        const setRef = function(node) {\n            const view = ucViews.get(viewDef.name);\n            view.$ref.value = node;\n            $refs.value[`ref${viewDef.name}`] = node;\n        }\n        return setRef;\n    }\n    function defineChildTemplateRef(viewDef, childDef) {\n        const setRef = function(node) {\n            const view = ucViews.get(viewDef.name);\n            view.$refs[childDef.ref] = node;\n            $refs.value[childDef.ref] = node;\n        }\n        return setRef;\n    }\n    // Add-Ons: Vuex Store, Router and Route\n    const vuexStore = useStore(), router = useRouter(), route = useRoute();\n    // FSM AJAX api\n    const fsm = new FsmAjax(config);\n    // Loader View (definition)\n    const loaderView = { title: '', component: Loader, props: {}, handlers: {} };\n    // Active View\n    const theActiveView = ref(ucViews.has(initView ?? '') ? ucViews.get(initView) : loaderView);\n    /** Activates specified MegaSetg View\n     * @param {string} view The MegaSet view name */\n    function activateView(view) {\n        if (!ucViews.has(view)) { throw new Error(`View to activate \"${view}\" does not exist`); }\n        theActiveView.value = ucViews.get(view);\n        if (usecase.props.modal === true) { usecase.emit('update:title', theActiveView.value.title); } \n        else if (isRef(route.meta.title)) { route.meta.title.value = theActiveView.value.title; }            \n    }\n    // Dispose Flag\n    const disposing = ref(false);\n    const killFsmOnClose = ref(false);\n    function routeLeaving(to, from, next) {\n        killFsmOnClose.value = toValue(from?.meta?.killFsmOnClose ?? false);\n        next();\n    }\n    // Dispose Method\n    async function dispose() {\n        if (vuexStore.getters.getURL === config.fsmUrl) { \n            vuexStore.dispatch(\"fsmURL\", null);\n            vuexStore.dispatch(\"activityCode\", '');\n            vuexStore.dispatch(\"subActivityCode\", '');\n        }\n        if (disposing.value === true) { return; }\n        try {\n            disposing.value = true;\n            if (killFsmOnClose.value === true || usecase.props.modal === true) {\n                await fsm.postKill();\n            }            \n        } catch(error) { onError(error, 'Dispose'); }\n    }\n    /** Closes UseCase HOC\n     * @param {boolean} kill Whether to post FSM `KILL` transition on disposal */\n    function close(kill = true) {        \n        if (kill === false && disposing.value === false) { disposing.value = true; }\n        if (usecase.props.modal === true) { usecase.emit('closing'); } else { router.go(-1); }\n    }\n    // Initialize Usecase\n    async function initialize() {\n        // Flag to tolerate FSM Errors\n        const tolerate = (typeof config.tolerateInit === 'boolean') ? config.tolerateInit : false;\n        try {\n            if (fsm.batchRequired && typeof FsmAjax.header.loginUserBatch !== 'number') {\n                throw new Error('Batch is not Open, Open a Batch');\n            }\n            if (usecase.props.modal === true) { usecase.emit('update:title', theActiveView.value.title); } \n            else {\n                vuexStore.dispatch(\"fsmURL\", config.fsmUrl); \n                if (isRef(route.meta.title)) { route.meta.title.value = theActiveView.value.title; }\n            }\n            const data = await fsm.postInit();\n            onInitialized(data);\n        } catch(error) { \n            disposing.value = true;\n            onError(error, 'Initialize');\n            if (!FsmAjax.isFsmError(error) || !tolerate) { close(); }\n        }\n    }\n    // Reinitialize UseCase    \n    async function reinitialize() {\n        try { await fsm.postKill(); } catch(error) { onError(error, 'Kill'); return; }\n        initialize();\n    }\n    // UseCase Render Function\n    function render(_ctx, _cache) {\n        if (Array.isArray(theActiveView.value.components)) {\n            return h(Fragment, null, theActiveView.value.components.map(function(item){\n                return h(resolveDynamicComponent(item.component), mergeProps(item.props, toHandlers(item.handlers)));\n            }));\n        } else {\n            return h(resolveDynamicComponent(theActiveView.value.component), mergeProps(theActiveView.value.props, toHandlers(theActiveView.value.handlers)));\n        }\n    }\n    // Life Cycle Hooks    \n    onBeforeMount(initialize);\n    onBeforeUnmount(dispose);\n    onBeforeRouteLeave(routeLeaving);\n    // The Active View\n    const activeView = computed(function() {\n        if (!!theActiveView.value && !!theActiveView.value.name) {\n            return { name: theActiveView.value.name, $ref: theActiveView.value.$ref }\n        } else { return undefined; }\n    });\n    // Return Methods\n    return { activateView, close, render, reinitialize, activeView, $refs: computed(() => $refs.value) };\n}\n/** Defines UseCase HOC\n * @param {string} name UseCase HOC name\n * @param {function} setup UseCase HOC setup method\n * @returns UseCase HOC */\nfunction defineUseCaseComponent(name, setup) {\n    if (isNilOrEmpty(name) || typeof setup !== 'function') { throw new Error('Invalid UseCase Component definition'); }\n    return defineComponent(setup, {\n        name,\n        props: {\n            fsmUrl: { type: String, required: true },            \n            modal: { type: Boolean, default: false },\n            title: { type: String, default: '' }\n        },\n        emits: ['update:title', 'closing']\n    });\n}\n/** Defines UseCase Loader function\n * @param {string} name UseCase HOC name\n * @param {function} setup UseCase HOC setup method\n * @returns {function} UseCase Loader Function */\nfunction defineUseCaseLoader(name, setup) {    \n    function loader(ctx, fsmUrl) {\n        const router = ctx.$router;\n        if (router.hasRoute(name)) { router.removeRoute(name); }\n        router.addRoute({\n            path: `/${name}`,\n            name,\n            component: defineUseCaseComponent(name, setup),\n            props: { fsmUrl },\n            meta: { title: ref(''), killFsmOnClose: ref(true), hideSideNavMenu: true }\n        });\n        router.push({name});        \n    }\n    return loader;\n}\nexport { FsmAjax, useUseCaseViewManager, defineUseCaseComponent, defineUseCaseLoader };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}