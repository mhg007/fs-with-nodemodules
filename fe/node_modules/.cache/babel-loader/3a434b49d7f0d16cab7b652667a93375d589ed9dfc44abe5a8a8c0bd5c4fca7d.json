{"ast":null,"code":"require(\"core-js/modules/es.array.push.js\");\n/*!\n * Viewer.js v1.11.6\n * https://fengyuanchen.github.io/viewerjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2023-09-17T03:16:38.052Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Viewer = factory());\n})(this, function () {\n  'use strict';\n\n  function ownKeys(e, r) {\n    var t = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var o = Object.getOwnPropertySymbols(e);\n      r && (o = o.filter(function (r) {\n        return Object.getOwnPropertyDescriptor(e, r).enumerable;\n      })), t.push.apply(t, o);\n    }\n    return t;\n  }\n  function _objectSpread2(e) {\n    for (var r = 1; r < arguments.length; r++) {\n      var t = null != arguments[r] ? arguments[r] : {};\n      r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n        _defineProperty(e, r, t[r]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n        Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n      });\n    }\n    return e;\n  }\n  function _typeof(o) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n      return typeof o;\n    } : function (o) {\n      return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, _typeof(o);\n  }\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n    }\n  }\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n  function _defineProperty(obj, key, value) {\n    key = _toPropertyKey(key);\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  function _toPrimitive(input, hint) {\n    if (typeof input !== \"object\" || input === null) return input;\n    var prim = input[Symbol.toPrimitive];\n    if (prim !== undefined) {\n      var res = prim.call(input, hint || \"default\");\n      if (typeof res !== \"object\") return res;\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n    return (hint === \"string\" ? String : Number)(input);\n  }\n  function _toPropertyKey(arg) {\n    var key = _toPrimitive(arg, \"string\");\n    return typeof key === \"symbol\" ? key : String(key);\n  }\n  var DEFAULTS = {\n    /**\n     * Enable a modal backdrop, specify `static` for a backdrop\n     * which doesn't close the modal on click.\n     * @type {boolean}\n     */\n    backdrop: true,\n    /**\n     * Show the button on the top-right of the viewer.\n     * @type {boolean}\n     */\n    button: true,\n    /**\n     * Show the navbar.\n     * @type {boolean | number}\n     */\n    navbar: true,\n    /**\n     * Specify the visibility and the content of the title.\n     * @type {boolean | number | Function | Array}\n     */\n    title: true,\n    /**\n     * Show the toolbar.\n     * @type {boolean | number | Object}\n     */\n    toolbar: true,\n    /**\n     * Custom class name(s) to add to the viewer's root element.\n     * @type {string}\n     */\n    className: '',\n    /**\n     * Define where to put the viewer in modal mode.\n     * @type {string | Element}\n     */\n    container: 'body',\n    /**\n     * Filter the images for viewing. Return true if the image is viewable.\n     * @type {Function}\n     */\n    filter: null,\n    /**\n     * Enable to request fullscreen when play.\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/FullscreenOptions}\n     * @type {boolean|FullscreenOptions}\n     */\n    fullscreen: true,\n    /**\n     * Define the extra attributes to inherit from the original image.\n     * @type {Array}\n     */\n    inheritedAttributes: ['crossOrigin', 'decoding', 'isMap', 'loading', 'referrerPolicy', 'sizes', 'srcset', 'useMap'],\n    /**\n     * Define the initial coverage of the viewing image.\n     * @type {number}\n     */\n    initialCoverage: 0.9,\n    /**\n     * Define the initial index of the image for viewing.\n     * @type {number}\n     */\n    initialViewIndex: 0,\n    /**\n     * Enable inline mode.\n     * @type {boolean}\n     */\n    inline: false,\n    /**\n     * The amount of time to delay between automatically cycling an image when playing.\n     * @type {number}\n     */\n    interval: 5000,\n    /**\n     * Enable keyboard support.\n     * @type {boolean}\n     */\n    keyboard: true,\n    /**\n     * Focus the viewer when initialized.\n     * @type {boolean}\n     */\n    focus: true,\n    /**\n     * Indicate if show a loading spinner when load image or not.\n     * @type {boolean}\n     */\n    loading: true,\n    /**\n     * Indicate if enable loop viewing or not.\n     * @type {boolean}\n     */\n    loop: true,\n    /**\n     * Min width of the viewer in inline mode.\n     * @type {number}\n     */\n    minWidth: 200,\n    /**\n     * Min height of the viewer in inline mode.\n     * @type {number}\n     */\n    minHeight: 100,\n    /**\n     * Enable to move the image.\n     * @type {boolean}\n     */\n    movable: true,\n    /**\n     * Enable to rotate the image.\n     * @type {boolean}\n     */\n    rotatable: true,\n    /**\n     * Enable to scale the image.\n     * @type {boolean}\n     */\n    scalable: true,\n    /**\n     * Enable to zoom the image.\n     * @type {boolean}\n     */\n    zoomable: true,\n    /**\n     * Enable to zoom the current image by dragging on the touch screen.\n     * @type {boolean}\n     */\n    zoomOnTouch: true,\n    /**\n     * Enable to zoom the image by wheeling mouse.\n     * @type {boolean}\n     */\n    zoomOnWheel: true,\n    /**\n     * Enable to slide to the next or previous image by swiping on the touch screen.\n     * @type {boolean}\n     */\n    slideOnTouch: true,\n    /**\n     * Indicate if toggle the image size between its natural size\n     * and initial size when double click on the image or not.\n     * @type {boolean}\n     */\n    toggleOnDblclick: true,\n    /**\n     * Show the tooltip with image ratio (percentage) when zoom in or zoom out.\n     * @type {boolean}\n     */\n    tooltip: true,\n    /**\n     * Enable CSS3 Transition for some special elements.\n     * @type {boolean}\n     */\n    transition: true,\n    /**\n     * Define the CSS `z-index` value of viewer in modal mode.\n     * @type {number}\n     */\n    zIndex: 2015,\n    /**\n     * Define the CSS `z-index` value of viewer in inline mode.\n     * @type {number}\n     */\n    zIndexInline: 0,\n    /**\n     * Define the ratio when zoom the image by wheeling mouse.\n     * @type {number}\n     */\n    zoomRatio: 0.1,\n    /**\n     * Define the min ratio of the image when zoom out.\n     * @type {number}\n     */\n    minZoomRatio: 0.01,\n    /**\n     * Define the max ratio of the image when zoom in.\n     * @type {number}\n     */\n    maxZoomRatio: 100,\n    /**\n     * Define where to get the original image URL for viewing.\n     * @type {string | Function}\n     */\n    url: 'src',\n    /**\n     * Event shortcuts.\n     * @type {Function}\n     */\n    ready: null,\n    show: null,\n    shown: null,\n    hide: null,\n    hidden: null,\n    view: null,\n    viewed: null,\n    move: null,\n    moved: null,\n    rotate: null,\n    rotated: null,\n    scale: null,\n    scaled: null,\n    zoom: null,\n    zoomed: null,\n    play: null,\n    stop: null\n  };\n  var TEMPLATE = '<div class=\"viewer-container\" tabindex=\"-1\" touch-action=\"none\">' + '<div class=\"viewer-canvas\"></div>' + '<div class=\"viewer-footer\">' + '<div class=\"viewer-title\"></div>' + '<div class=\"viewer-toolbar\"></div>' + '<div class=\"viewer-navbar\">' + '<ul class=\"viewer-list\" role=\"navigation\"></ul>' + '</div>' + '</div>' + '<div class=\"viewer-tooltip\" role=\"alert\" aria-hidden=\"true\"></div>' + '<div class=\"viewer-button\" data-viewer-action=\"mix\" role=\"button\"></div>' + '<div class=\"viewer-player\"></div>' + '</div>';\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'viewer';\n\n  // Actions\n  var ACTION_MOVE = 'move';\n  var ACTION_SWITCH = 'switch';\n  var ACTION_ZOOM = 'zoom';\n\n  // Classes\n  var CLASS_ACTIVE = \"\".concat(NAMESPACE, \"-active\");\n  var CLASS_CLOSE = \"\".concat(NAMESPACE, \"-close\");\n  var CLASS_FADE = \"\".concat(NAMESPACE, \"-fade\");\n  var CLASS_FIXED = \"\".concat(NAMESPACE, \"-fixed\");\n  var CLASS_FULLSCREEN = \"\".concat(NAMESPACE, \"-fullscreen\");\n  var CLASS_FULLSCREEN_EXIT = \"\".concat(NAMESPACE, \"-fullscreen-exit\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_HIDE_MD_DOWN = \"\".concat(NAMESPACE, \"-hide-md-down\");\n  var CLASS_HIDE_SM_DOWN = \"\".concat(NAMESPACE, \"-hide-sm-down\");\n  var CLASS_HIDE_XS_DOWN = \"\".concat(NAMESPACE, \"-hide-xs-down\");\n  var CLASS_IN = \"\".concat(NAMESPACE, \"-in\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_LOADING = \"\".concat(NAMESPACE, \"-loading\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\");\n  var CLASS_OPEN = \"\".concat(NAMESPACE, \"-open\");\n  var CLASS_SHOW = \"\".concat(NAMESPACE, \"-show\");\n  var CLASS_TRANSITION = \"\".concat(NAMESPACE, \"-transition\");\n\n  // Native events\n  var EVENT_CLICK = 'click';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_DRAG_START = 'dragstart';\n  var EVENT_FOCUSIN = 'focusin';\n  var EVENT_KEY_DOWN = 'keydown';\n  var EVENT_LOAD = 'load';\n  var EVENT_ERROR = 'error';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_RESIZE = 'resize';\n  var EVENT_TRANSITION_END = 'transitionend';\n  var EVENT_WHEEL = 'wheel';\n\n  // Custom events\n  var EVENT_READY = 'ready';\n  var EVENT_SHOW = 'show';\n  var EVENT_SHOWN = 'shown';\n  var EVENT_HIDE = 'hide';\n  var EVENT_HIDDEN = 'hidden';\n  var EVENT_VIEW = 'view';\n  var EVENT_VIEWED = 'viewed';\n  var EVENT_MOVE = 'move';\n  var EVENT_MOVED = 'moved';\n  var EVENT_ROTATE = 'rotate';\n  var EVENT_ROTATED = 'rotated';\n  var EVENT_SCALE = 'scale';\n  var EVENT_SCALED = 'scaled';\n  var EVENT_ZOOM = 'zoom';\n  var EVENT_ZOOMED = 'zoomed';\n  var EVENT_PLAY = 'play';\n  var EVENT_STOP = 'stop';\n\n  // Data keys\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\n\n  // RegExps\n  var REGEXP_SPACES = /\\s\\s*/;\n\n  // Misc\n  var BUTTONS = ['zoom-in', 'zoom-out', 'one-to-one', 'reset', 'prev', 'play', 'next', 'rotate-left', 'rotate-right', 'flip-horizontal', 'flip-vertical'];\n\n  /**\n   * Check if the given value is a string.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a string, else `false`.\n   */\n  function isString(value) {\n    return typeof value === 'string';\n  }\n\n  /**\n   * Check if the given value is not a number.\n   */\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length) /* array-like */) {\n        var length = data.length;\n        var i;\n        for (i = 0; i < length; i += 1) {\n          if (callback.call(data, data[i], i, data) === false) {\n            break;\n          }\n        }\n      } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n    return data;\n  }\n\n  /**\n   * Extend the given object.\n   * @param {*} obj - The object to be extended.\n   * @param {*} args - The rest objects which will be merged to the first object.\n   * @returns {Object} The extended object.\n   */\n  var assign = Object.assign || function assign(obj) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    if (isObject(obj) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            obj[key] = arg[key];\n          });\n        }\n      });\n    }\n    return obj;\n  };\n  var REGEXP_SUFFIX = /^(?:width|height|left|top|marginLeft|marginTop)$/;\n\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value += 'px';\n      }\n      style[property] = value;\n    });\n  }\n\n  /**\n   * Escape a string for using in HTML.\n   * @param {String} value - The string to escape.\n   * @returns {String} Returns the escaped string.\n   */\n  function escapeHTMLEntities(value) {\n    return isString(value) ? value.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g, '&amp;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;') : value;\n  }\n\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n  function hasClass(element, value) {\n    if (!element || !value) {\n      return false;\n    }\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n  function addClass(element, value) {\n    if (!element || !value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n    var className = element.className.trim();\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n  function removeClass(element, value) {\n    if (!element || !value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    }\n\n    // IE10-11 doesn't support the second parameter of `classList.toggle`\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n  function hyphenate(value) {\n    return value.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n  }\n\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n    return element.getAttribute(\"data-\".concat(hyphenate(name)));\n  }\n\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(hyphenate(name)), data);\n    }\n  }\n  var onceSupported = function () {\n    var supported = false;\n    if (IS_BROWSER) {\n      var once = false;\n      var listener = function listener() {};\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n    return supported;\n  }();\n\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n      element.removeEventListener(event, handler, options);\n    });\n  }\n\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n          listeners = _element$listeners === void 0 ? {} : _element$listeners;\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n          listener.apply(element, args);\n        };\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n      element.addEventListener(event, _handler, options);\n    });\n  }\n\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @param {Object} options - The additional event options.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n  function dispatchEvent(element, type, data, options) {\n    var event;\n\n    // Event and CustomEvent on IE9-11 are global objects, not constructors\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, _objectSpread2({\n        bubbles: true,\n        cancelable: true,\n        detail: data\n      }, options));\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n    return element.dispatchEvent(event);\n  }\n\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n      scaleX = _ref.scaleX,\n      scaleY = _ref.scaleY,\n      translateX = _ref.translateX,\n      translateY = _ref.translateY;\n    var values = [];\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    }\n\n    // Rotate should come first before scale to match orientation transform\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n\n  /**\n   * Get an image name from an image url.\n   * @param {string} url - The target url.\n   * @example\n   * // picture.jpg\n   * getImageNameFromURL('https://domain.com/path/to/picture.jpg?size=1280×960')\n   * @returns {string} A string contains the image name.\n   */\n  function getImageNameFromURL(url) {\n    return isString(url) ? decodeURIComponent(url.replace(/^.*\\//, '').replace(/[?&#].*$/, '')) : '';\n  }\n  var IS_SAFARI = WINDOW.navigator && /Version\\/\\d+(\\.\\d+)+?\\s+Safari/i.test(WINDOW.navigator.userAgent);\n\n  /**\n   * Get an image's natural sizes.\n   * @param {string} image - The target image.\n   * @param {Object} options - The viewer options.\n   * @param {Function} callback - The callback function.\n   * @returns {HTMLImageElement} The new image.\n   */\n  function getImageNaturalSizes(image, options, callback) {\n    var newImage = document.createElement('img');\n\n    // Modern browsers (except Safari)\n    if (image.naturalWidth && !IS_SAFARI) {\n      callback(image.naturalWidth, image.naturalHeight);\n      return newImage;\n    }\n    var body = document.body || document.documentElement;\n    newImage.onload = function () {\n      callback(newImage.width, newImage.height);\n      if (!IS_SAFARI) {\n        body.removeChild(newImage);\n      }\n    };\n    forEach(options.inheritedAttributes, function (name) {\n      var value = image.getAttribute(name);\n      if (value !== null) {\n        newImage.setAttribute(name, value);\n      }\n    });\n    newImage.src = image.src;\n\n    // iOS Safari will convert the image automatically\n    // with its orientation once append it into DOM\n    if (!IS_SAFARI) {\n      newImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n      body.appendChild(newImage);\n    }\n    return newImage;\n  }\n\n  /**\n   * Get the related class name of a responsive type number.\n   * @param {string} type - The responsive type.\n   * @returns {string} The related class name.\n   */\n  function getResponsiveClass(type) {\n    switch (type) {\n      case 2:\n        return CLASS_HIDE_XS_DOWN;\n      case 3:\n        return CLASS_HIDE_SM_DOWN;\n      case 4:\n        return CLASS_HIDE_MD_DOWN;\n      default:\n        return '';\n    }\n  }\n\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n    var ratios = [];\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n        ratios.push(ratio);\n      });\n    });\n    ratios.sort(function (a, b) {\n      return Math.abs(a) < Math.abs(b);\n    });\n    return ratios[0];\n  }\n\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n      pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      timeStamp: Date.now(),\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n        startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initViewer();\n      this.initList();\n      this.renderViewer();\n    },\n    initBody: function initBody() {\n      var ownerDocument = this.element.ownerDocument;\n      var body = ownerDocument.body || ownerDocument.documentElement;\n      this.body = body;\n      this.scrollbarWidth = window.innerWidth - ownerDocument.documentElement.clientWidth;\n      this.initialBodyPaddingRight = body.style.paddingRight;\n      this.initialBodyComputedPaddingRight = window.getComputedStyle(body).paddingRight;\n    },\n    initContainer: function initContainer() {\n      this.containerData = {\n        width: window.innerWidth,\n        height: window.innerHeight\n      };\n    },\n    initViewer: function initViewer() {\n      var options = this.options,\n        parent = this.parent;\n      var viewerData;\n      if (options.inline) {\n        viewerData = {\n          width: Math.max(parent.offsetWidth, options.minWidth),\n          height: Math.max(parent.offsetHeight, options.minHeight)\n        };\n        this.parentData = viewerData;\n      }\n      if (this.fulled || !viewerData) {\n        viewerData = this.containerData;\n      }\n      this.viewerData = assign({}, viewerData);\n    },\n    renderViewer: function renderViewer() {\n      if (this.options.inline && !this.fulled) {\n        setStyle(this.viewer, this.viewerData);\n      }\n    },\n    initList: function initList() {\n      var _this = this;\n      var element = this.element,\n        options = this.options,\n        list = this.list;\n      var items = [];\n\n      // initList may be called in this.update, so should keep idempotent\n      list.innerHTML = '';\n      forEach(this.images, function (image, index) {\n        var src = image.src;\n        var alt = image.alt || getImageNameFromURL(src);\n        var url = _this.getImageURL(image);\n        if (src || url) {\n          var item = document.createElement('li');\n          var img = document.createElement('img');\n          forEach(options.inheritedAttributes, function (name) {\n            var value = image.getAttribute(name);\n            if (value !== null) {\n              img.setAttribute(name, value);\n            }\n          });\n          if (options.navbar) {\n            img.src = src || url;\n          }\n          img.alt = alt;\n          img.setAttribute('data-original-url', url || src);\n          item.setAttribute('data-index', index);\n          item.setAttribute('data-viewer-action', 'view');\n          item.setAttribute('role', 'button');\n          if (options.keyboard) {\n            item.setAttribute('tabindex', 0);\n          }\n          item.appendChild(img);\n          list.appendChild(item);\n          items.push(item);\n        }\n      });\n      this.items = items;\n      forEach(items, function (item) {\n        var image = item.firstElementChild;\n        var onLoad;\n        var onError;\n        setData(image, 'filled', true);\n        if (options.loading) {\n          addClass(item, CLASS_LOADING);\n        }\n        addListener(image, EVENT_LOAD, onLoad = function onLoad(event) {\n          removeListener(image, EVENT_ERROR, onError);\n          if (options.loading) {\n            removeClass(item, CLASS_LOADING);\n          }\n          _this.loadImage(event);\n        }, {\n          once: true\n        });\n        addListener(image, EVENT_ERROR, onError = function onError() {\n          removeListener(image, EVENT_LOAD, onLoad);\n          if (options.loading) {\n            removeClass(item, CLASS_LOADING);\n          }\n        }, {\n          once: true\n        });\n      });\n      if (options.transition) {\n        addListener(element, EVENT_VIEWED, function () {\n          addClass(list, CLASS_TRANSITION);\n        }, {\n          once: true\n        });\n      }\n    },\n    renderList: function renderList() {\n      var index = this.index;\n      var item = this.items[index];\n      if (!item) {\n        return;\n      }\n      var next = item.nextElementSibling;\n      var gutter = parseInt(window.getComputedStyle(next || item).marginLeft, 10);\n      var offsetWidth = item.offsetWidth;\n      var outerWidth = offsetWidth + gutter;\n\n      // Place the active item in the center of the screen\n      setStyle(this.list, assign({\n        width: outerWidth * this.length - gutter\n      }, getTransforms({\n        translateX: (this.viewerData.width - offsetWidth) / 2 - outerWidth * index\n      })));\n    },\n    resetList: function resetList() {\n      var list = this.list;\n      list.innerHTML = '';\n      removeClass(list, CLASS_TRANSITION);\n      setStyle(list, getTransforms({\n        translateX: 0\n      }));\n    },\n    initImage: function initImage(done) {\n      var _this2 = this;\n      var options = this.options,\n        image = this.image,\n        viewerData = this.viewerData;\n      var footerHeight = this.footer.offsetHeight;\n      var viewerWidth = viewerData.width;\n      var viewerHeight = Math.max(viewerData.height - footerHeight, footerHeight);\n      var oldImageData = this.imageData || {};\n      var sizingImage;\n      this.imageInitializing = {\n        abort: function abort() {\n          sizingImage.onload = null;\n        }\n      };\n      sizingImage = getImageNaturalSizes(image, options, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var initialCoverage = Math.max(0, Math.min(1, options.initialCoverage));\n        var width = viewerWidth;\n        var height = viewerHeight;\n        _this2.imageInitializing = false;\n        if (viewerHeight * aspectRatio > viewerWidth) {\n          height = viewerWidth / aspectRatio;\n        } else {\n          width = viewerHeight * aspectRatio;\n        }\n        initialCoverage = isNumber(initialCoverage) ? initialCoverage : 0.9;\n        width = Math.min(width * initialCoverage, naturalWidth);\n        height = Math.min(height * initialCoverage, naturalHeight);\n        var left = (viewerWidth - width) / 2;\n        var top = (viewerHeight - height) / 2;\n        var imageData = {\n          left: left,\n          top: top,\n          x: left,\n          y: top,\n          width: width,\n          height: height,\n          oldRatio: 1,\n          ratio: width / naturalWidth,\n          aspectRatio: aspectRatio,\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight\n        };\n        var initialImageData = assign({}, imageData);\n        if (options.rotatable) {\n          imageData.rotate = oldImageData.rotate || 0;\n          initialImageData.rotate = 0;\n        }\n        if (options.scalable) {\n          imageData.scaleX = oldImageData.scaleX || 1;\n          imageData.scaleY = oldImageData.scaleY || 1;\n          initialImageData.scaleX = 1;\n          initialImageData.scaleY = 1;\n        }\n        _this2.imageData = imageData;\n        _this2.initialImageData = initialImageData;\n        if (done) {\n          done();\n        }\n      });\n    },\n    renderImage: function renderImage(done) {\n      var _this3 = this;\n      var image = this.image,\n        imageData = this.imageData;\n      setStyle(image, assign({\n        width: imageData.width,\n        height: imageData.height,\n        // XXX: Not to use translateX/Y to avoid image shaking when zooming\n        marginLeft: imageData.x,\n        marginTop: imageData.y\n      }, getTransforms(imageData)));\n      if (done) {\n        if ((this.viewing || this.moving || this.rotating || this.scaling || this.zooming) && this.options.transition && hasClass(image, CLASS_TRANSITION)) {\n          var onTransitionEnd = function onTransitionEnd() {\n            _this3.imageRendering = false;\n            done();\n          };\n          this.imageRendering = {\n            abort: function abort() {\n              removeListener(image, EVENT_TRANSITION_END, onTransitionEnd);\n            }\n          };\n          addListener(image, EVENT_TRANSITION_END, onTransitionEnd, {\n            once: true\n          });\n        } else {\n          done();\n        }\n      }\n    },\n    resetImage: function resetImage() {\n      var image = this.image;\n      if (image) {\n        if (this.viewing) {\n          this.viewing.abort();\n        }\n        image.parentNode.removeChild(image);\n        this.image = null;\n        this.title.innerHTML = '';\n      }\n    }\n  };\n  var events = {\n    bind: function bind() {\n      var options = this.options,\n        viewer = this.viewer,\n        canvas = this.canvas;\n      var document = this.element.ownerDocument;\n      addListener(viewer, EVENT_CLICK, this.onClick = this.click.bind(this));\n      addListener(viewer, EVENT_DRAG_START, this.onDragStart = this.dragstart.bind(this));\n      addListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown = this.pointerdown.bind(this));\n      addListener(document, EVENT_POINTER_MOVE, this.onPointerMove = this.pointermove.bind(this));\n      addListener(document, EVENT_POINTER_UP, this.onPointerUp = this.pointerup.bind(this));\n      addListener(document, EVENT_KEY_DOWN, this.onKeyDown = this.keydown.bind(this));\n      addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(viewer, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n      if (options.toggleOnDblclick) {\n        addListener(canvas, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var options = this.options,\n        viewer = this.viewer,\n        canvas = this.canvas;\n      var document = this.element.ownerDocument;\n      removeListener(viewer, EVENT_CLICK, this.onClick);\n      removeListener(viewer, EVENT_DRAG_START, this.onDragStart);\n      removeListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown);\n      removeListener(document, EVENT_POINTER_MOVE, this.onPointerMove);\n      removeListener(document, EVENT_POINTER_UP, this.onPointerUp);\n      removeListener(document, EVENT_KEY_DOWN, this.onKeyDown);\n      removeListener(window, EVENT_RESIZE, this.onResize);\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(viewer, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n      if (options.toggleOnDblclick) {\n        removeListener(canvas, EVENT_DBLCLICK, this.onDblclick);\n      }\n    }\n  };\n  var handlers = {\n    click: function click(event) {\n      var options = this.options,\n        imageData = this.imageData;\n      var target = event.target;\n      var action = getData(target, DATA_ACTION);\n      if (!action && target.localName === 'img' && target.parentElement.localName === 'li') {\n        target = target.parentElement;\n        action = getData(target, DATA_ACTION);\n      }\n\n      // Cancel the emulated click when the native click event was triggered.\n      if (IS_TOUCH_DEVICE && event.isTrusted && target === this.canvas) {\n        clearTimeout(this.clickCanvasTimeout);\n      }\n      switch (action) {\n        case 'mix':\n          if (this.played) {\n            this.stop();\n          } else if (options.inline) {\n            if (this.fulled) {\n              this.exit();\n            } else {\n              this.full();\n            }\n          } else {\n            this.hide();\n          }\n          break;\n        case 'hide':\n          if (!this.pointerMoved) {\n            this.hide();\n          }\n          break;\n        case 'view':\n          this.view(getData(target, 'index'));\n          break;\n        case 'zoom-in':\n          this.zoom(0.1, true);\n          break;\n        case 'zoom-out':\n          this.zoom(-0.1, true);\n          break;\n        case 'one-to-one':\n          this.toggle();\n          break;\n        case 'reset':\n          this.reset();\n          break;\n        case 'prev':\n          this.prev(options.loop);\n          break;\n        case 'play':\n          this.play(options.fullscreen);\n          break;\n        case 'next':\n          this.next(options.loop);\n          break;\n        case 'rotate-left':\n          this.rotate(-90);\n          break;\n        case 'rotate-right':\n          this.rotate(90);\n          break;\n        case 'flip-horizontal':\n          this.scaleX(-imageData.scaleX || -1);\n          break;\n        case 'flip-vertical':\n          this.scaleY(-imageData.scaleY || -1);\n          break;\n        default:\n          if (this.played) {\n            this.stop();\n          }\n      }\n    },\n    dblclick: function dblclick(event) {\n      event.preventDefault();\n      if (this.viewed && event.target === this.image) {\n        // Cancel the emulated double click when the native dblclick event was triggered.\n        if (IS_TOUCH_DEVICE && event.isTrusted) {\n          clearTimeout(this.doubleClickImageTimeout);\n        }\n\n        // XXX: No pageX/Y properties in custom event, fallback to the original event.\n        this.toggle(event.isTrusted ? event : event.detail && event.detail.originalEvent);\n      }\n    },\n    load: function load() {\n      var _this = this;\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n        this.timeout = false;\n      }\n      var element = this.element,\n        options = this.options,\n        image = this.image,\n        index = this.index,\n        viewerData = this.viewerData;\n      removeClass(image, CLASS_INVISIBLE);\n      if (options.loading) {\n        removeClass(this.canvas, CLASS_LOADING);\n      }\n      image.style.cssText = 'height:0;' + \"margin-left:\".concat(viewerData.width / 2, \"px;\") + \"margin-top:\".concat(viewerData.height / 2, \"px;\") + 'max-width:none!important;' + 'position:relative;' + 'width:0;';\n      this.initImage(function () {\n        toggleClass(image, CLASS_MOVE, options.movable);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n        _this.renderImage(function () {\n          _this.viewed = true;\n          _this.viewing = false;\n          if (isFunction(options.viewed)) {\n            addListener(element, EVENT_VIEWED, options.viewed, {\n              once: true\n            });\n          }\n          dispatchEvent(element, EVENT_VIEWED, {\n            originalImage: _this.images[index],\n            index: index,\n            image: image\n          }, {\n            cancelable: false\n          });\n        });\n      });\n    },\n    loadImage: function loadImage(event) {\n      var image = event.target;\n      var parent = image.parentNode;\n      var parentWidth = parent.offsetWidth || 30;\n      var parentHeight = parent.offsetHeight || 50;\n      var filled = !!getData(image, 'filled');\n      getImageNaturalSizes(image, this.options, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = parentWidth;\n        var height = parentHeight;\n        if (parentHeight * aspectRatio > parentWidth) {\n          if (filled) {\n            width = parentHeight * aspectRatio;\n          } else {\n            height = parentWidth / aspectRatio;\n          }\n        } else if (filled) {\n          height = parentWidth / aspectRatio;\n        } else {\n          width = parentHeight * aspectRatio;\n        }\n        setStyle(image, assign({\n          width: width,\n          height: height\n        }, getTransforms({\n          translateX: (parentWidth - width) / 2,\n          translateY: (parentHeight - height) / 2\n        })));\n      });\n    },\n    keydown: function keydown(event) {\n      var options = this.options;\n      if (!options.keyboard) {\n        return;\n      }\n      var keyCode = event.keyCode || event.which || event.charCode;\n      switch (keyCode) {\n        // Enter\n        case 13:\n          if (this.viewer.contains(event.target)) {\n            this.click(event);\n          }\n          break;\n      }\n      if (!this.fulled) {\n        return;\n      }\n      switch (keyCode) {\n        // Escape\n        case 27:\n          if (this.played) {\n            this.stop();\n          } else if (options.inline) {\n            if (this.fulled) {\n              this.exit();\n            }\n          } else {\n            this.hide();\n          }\n          break;\n\n        // Space\n        case 32:\n          if (this.played) {\n            this.stop();\n          }\n          break;\n\n        // ArrowLeft\n        case 37:\n          if (this.played && this.playing) {\n            this.playing.prev();\n          } else {\n            this.prev(options.loop);\n          }\n          break;\n\n        // ArrowUp\n        case 38:\n          // Prevent scroll on Firefox\n          event.preventDefault();\n\n          // Zoom in\n          this.zoom(options.zoomRatio, true);\n          break;\n\n        // ArrowRight\n        case 39:\n          if (this.played && this.playing) {\n            this.playing.next();\n          } else {\n            this.next(options.loop);\n          }\n          break;\n\n        // ArrowDown\n        case 40:\n          // Prevent scroll on Firefox\n          event.preventDefault();\n\n          // Zoom out\n          this.zoom(-options.zoomRatio, true);\n          break;\n\n        // Ctrl + 0\n        case 48:\n        // Fall through\n\n        // Ctrl + 1\n        // eslint-disable-next-line no-fallthrough\n        case 49:\n          if (event.ctrlKey) {\n            event.preventDefault();\n            this.toggle();\n          }\n          break;\n      }\n    },\n    dragstart: function dragstart(event) {\n      if (event.target.localName === 'img') {\n        event.preventDefault();\n      }\n    },\n    pointerdown: function pointerdown(event) {\n      var options = this.options,\n        pointers = this.pointers;\n      var buttons = event.buttons,\n        button = event.button;\n      this.pointerMoved = false;\n      if (!this.viewed || this.showing || this.viewing || this.hiding\n\n      // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && (\n      // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0\n\n      // Open context menu\n      || event.ctrlKey)) {\n        return;\n      }\n\n      // Prevent default behaviours as page zooming in touch devices.\n      event.preventDefault();\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n      var action = options.movable ? ACTION_MOVE : false;\n      if (options.zoomOnTouch && options.zoomable && Object.keys(pointers).length > 1) {\n        action = ACTION_ZOOM;\n      } else if (options.slideOnTouch && (event.pointerType === 'touch' || event.type === 'touchstart') && this.isSwitchable()) {\n        action = ACTION_SWITCH;\n      }\n      if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n        removeClass(this.image, CLASS_TRANSITION);\n      }\n      this.action = action;\n    },\n    pointermove: function pointermove(event) {\n      var pointers = this.pointers,\n        action = this.action;\n      if (!this.viewed || !action) {\n        return;\n      }\n      event.preventDefault();\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n      this.change(event);\n    },\n    pointerup: function pointerup(event) {\n      var _this2 = this;\n      var options = this.options,\n        action = this.action,\n        pointers = this.pointers;\n      var pointer;\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          pointer = pointers[touch.identifier];\n          delete pointers[touch.identifier];\n        });\n      } else {\n        pointer = pointers[event.pointerId || 0];\n        delete pointers[event.pointerId || 0];\n      }\n      if (!action) {\n        return;\n      }\n      event.preventDefault();\n      if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n        addClass(this.image, CLASS_TRANSITION);\n      }\n      this.action = false;\n\n      // Emulate click and double click in touch devices to support backdrop and image zooming (#210).\n      if (IS_TOUCH_DEVICE && action !== ACTION_ZOOM && pointer && Date.now() - pointer.timeStamp < 500) {\n        clearTimeout(this.clickCanvasTimeout);\n        clearTimeout(this.doubleClickImageTimeout);\n        if (options.toggleOnDblclick && this.viewed && event.target === this.image) {\n          if (this.imageClicked) {\n            this.imageClicked = false;\n\n            // This timeout will be cleared later when a native dblclick event is triggering\n            this.doubleClickImageTimeout = setTimeout(function () {\n              dispatchEvent(_this2.image, EVENT_DBLCLICK, {\n                originalEvent: event\n              });\n            }, 50);\n          } else {\n            this.imageClicked = true;\n\n            // The default timing of a double click in Windows is 500 ms\n            this.doubleClickImageTimeout = setTimeout(function () {\n              _this2.imageClicked = false;\n            }, 500);\n          }\n        } else {\n          this.imageClicked = false;\n          if (options.backdrop && options.backdrop !== 'static' && event.target === this.canvas) {\n            // This timeout will be cleared later when a native click event is triggering\n            this.clickCanvasTimeout = setTimeout(function () {\n              dispatchEvent(_this2.canvas, EVENT_CLICK, {\n                originalEvent: event\n              });\n            }, 50);\n          }\n        }\n      }\n    },\n    resize: function resize() {\n      var _this3 = this;\n      if (!this.isShown || this.hiding) {\n        return;\n      }\n      if (this.fulled) {\n        this.close();\n        this.initBody();\n        this.open();\n      }\n      this.initContainer();\n      this.initViewer();\n      this.renderViewer();\n      this.renderList();\n      if (this.viewed) {\n        this.initImage(function () {\n          _this3.renderImage();\n        });\n      }\n      if (this.played) {\n        if (this.options.fullscreen && this.fulled && !(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n          this.stop();\n          return;\n        }\n        forEach(this.player.getElementsByTagName('img'), function (image) {\n          addListener(image, EVENT_LOAD, _this3.loadImage.bind(_this3), {\n            once: true\n          });\n          dispatchEvent(image, EVENT_LOAD);\n        });\n      }\n    },\n    wheel: function wheel(event) {\n      var _this4 = this;\n      if (!this.viewed) {\n        return;\n      }\n      event.preventDefault();\n\n      // Limit wheel speed to prevent zoom too fast\n      if (this.wheeling) {\n        return;\n      }\n      this.wheeling = true;\n      setTimeout(function () {\n        _this4.wheeling = false;\n      }, 50);\n      var ratio = Number(this.options.zoomRatio) || 0.1;\n      var delta = 1;\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n      this.zoom(-delta * ratio, true, null, event);\n    }\n  };\n  var methods = {\n    /** Show the viewer (only available in modal mode)\n     * @param {boolean} [immediate=false] - Indicates if show the viewer immediately or not.\n     * @returns {Viewer} this\n     */\n    show: function show() {\n      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var element = this.element,\n        options = this.options;\n      if (options.inline || this.showing || this.isShown || this.showing) {\n        return this;\n      }\n      if (!this.ready) {\n        this.build();\n        if (this.ready) {\n          this.show(immediate);\n        }\n        return this;\n      }\n      if (isFunction(options.show)) {\n        addListener(element, EVENT_SHOW, options.show, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_SHOW) === false || !this.ready) {\n        return this;\n      }\n      if (this.hiding) {\n        this.transitioning.abort();\n      }\n      this.showing = true;\n      this.open();\n      var viewer = this.viewer;\n      removeClass(viewer, CLASS_HIDE);\n      viewer.setAttribute('role', 'dialog');\n      viewer.setAttribute('aria-labelledby', this.title.id);\n      viewer.setAttribute('aria-modal', true);\n      viewer.removeAttribute('aria-hidden');\n      if (options.transition && !immediate) {\n        var shown = this.shown.bind(this);\n        this.transitioning = {\n          abort: function abort() {\n            removeListener(viewer, EVENT_TRANSITION_END, shown);\n            removeClass(viewer, CLASS_IN);\n          }\n        };\n        addClass(viewer, CLASS_TRANSITION);\n\n        // Force reflow to enable CSS3 transition\n        viewer.initialOffsetWidth = viewer.offsetWidth;\n        addListener(viewer, EVENT_TRANSITION_END, shown, {\n          once: true\n        });\n        addClass(viewer, CLASS_IN);\n      } else {\n        addClass(viewer, CLASS_IN);\n        this.shown();\n      }\n      return this;\n    },\n    /**\n     * Hide the viewer (only available in modal mode)\n     * @param {boolean} [immediate=false] - Indicates if hide the viewer immediately or not.\n     * @returns {Viewer} this\n     */\n    hide: function hide() {\n      var _this = this;\n      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var element = this.element,\n        options = this.options;\n      if (options.inline || this.hiding || !(this.isShown || this.showing)) {\n        return this;\n      }\n      if (isFunction(options.hide)) {\n        addListener(element, EVENT_HIDE, options.hide, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_HIDE) === false) {\n        return this;\n      }\n      if (this.showing) {\n        this.transitioning.abort();\n      }\n      this.hiding = true;\n      if (this.played) {\n        this.stop();\n      } else if (this.viewing) {\n        this.viewing.abort();\n      }\n      var viewer = this.viewer,\n        image = this.image;\n      var hideImmediately = function hideImmediately() {\n        removeClass(viewer, CLASS_IN);\n        _this.hidden();\n      };\n      if (options.transition && !immediate) {\n        var onViewerTransitionEnd = function onViewerTransitionEnd(event) {\n          // Ignore all propagating `transitionend` events (#275).\n          if (event && event.target === viewer) {\n            removeListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n            _this.hidden();\n          }\n        };\n        var onImageTransitionEnd = function onImageTransitionEnd() {\n          // In case of show the viewer by `viewer.show(true)` previously (#407).\n          if (hasClass(viewer, CLASS_TRANSITION)) {\n            addListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n            removeClass(viewer, CLASS_IN);\n          } else {\n            hideImmediately();\n          }\n        };\n        this.transitioning = {\n          abort: function abort() {\n            if (_this.viewed && hasClass(image, CLASS_TRANSITION)) {\n              removeListener(image, EVENT_TRANSITION_END, onImageTransitionEnd);\n            } else if (hasClass(viewer, CLASS_TRANSITION)) {\n              removeListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n            }\n          }\n        };\n\n        // In case of hiding the viewer when holding on the image (#255),\n        // note that the `CLASS_TRANSITION` class will be removed on pointer down.\n        if (this.viewed && hasClass(image, CLASS_TRANSITION)) {\n          addListener(image, EVENT_TRANSITION_END, onImageTransitionEnd, {\n            once: true\n          });\n          this.zoomTo(0, false, null, null, true);\n        } else {\n          onImageTransitionEnd();\n        }\n      } else {\n        hideImmediately();\n      }\n      return this;\n    },\n    /**\n     * View one of the images with image's index\n     * @param {number} index - The index of the image to view.\n     * @returns {Viewer} this\n     */\n    view: function view() {\n      var _this2 = this;\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options.initialViewIndex;\n      index = Number(index) || 0;\n      if (this.hiding || this.played || index < 0 || index >= this.length || this.viewed && index === this.index) {\n        return this;\n      }\n      if (!this.isShown) {\n        this.index = index;\n        return this.show();\n      }\n      if (this.viewing) {\n        this.viewing.abort();\n      }\n      var element = this.element,\n        options = this.options,\n        title = this.title,\n        canvas = this.canvas;\n      var item = this.items[index];\n      var img = item.querySelector('img');\n      var url = getData(img, 'originalUrl');\n      var alt = img.getAttribute('alt');\n      var image = document.createElement('img');\n      forEach(options.inheritedAttributes, function (name) {\n        var value = img.getAttribute(name);\n        if (value !== null) {\n          image.setAttribute(name, value);\n        }\n      });\n      image.src = url;\n      image.alt = alt;\n      if (isFunction(options.view)) {\n        addListener(element, EVENT_VIEW, options.view, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_VIEW, {\n        originalImage: this.images[index],\n        index: index,\n        image: image\n      }) === false || !this.isShown || this.hiding || this.played) {\n        return this;\n      }\n      var activeItem = this.items[this.index];\n      if (activeItem) {\n        removeClass(activeItem, CLASS_ACTIVE);\n        activeItem.removeAttribute('aria-selected');\n      }\n      addClass(item, CLASS_ACTIVE);\n      item.setAttribute('aria-selected', true);\n      if (options.focus) {\n        item.focus();\n      }\n      this.image = image;\n      this.viewed = false;\n      this.index = index;\n      this.imageData = {};\n      addClass(image, CLASS_INVISIBLE);\n      if (options.loading) {\n        addClass(canvas, CLASS_LOADING);\n      }\n      canvas.innerHTML = '';\n      canvas.appendChild(image);\n\n      // Center current item\n      this.renderList();\n\n      // Clear title\n      title.innerHTML = '';\n\n      // Generate title after viewed\n      var onViewed = function onViewed() {\n        var imageData = _this2.imageData;\n        var render = Array.isArray(options.title) ? options.title[1] : options.title;\n        title.innerHTML = escapeHTMLEntities(isFunction(render) ? render.call(_this2, image, imageData) : \"\".concat(alt, \" (\").concat(imageData.naturalWidth, \" \\xD7 \").concat(imageData.naturalHeight, \")\"));\n      };\n      var onLoad;\n      var onError;\n      addListener(element, EVENT_VIEWED, onViewed, {\n        once: true\n      });\n      this.viewing = {\n        abort: function abort() {\n          removeListener(element, EVENT_VIEWED, onViewed);\n          if (image.complete) {\n            if (_this2.imageRendering) {\n              _this2.imageRendering.abort();\n            } else if (_this2.imageInitializing) {\n              _this2.imageInitializing.abort();\n            }\n          } else {\n            // Cancel download to save bandwidth.\n            image.src = '';\n            removeListener(image, EVENT_LOAD, onLoad);\n            if (_this2.timeout) {\n              clearTimeout(_this2.timeout);\n            }\n          }\n        }\n      };\n      if (image.complete) {\n        this.load();\n      } else {\n        addListener(image, EVENT_LOAD, onLoad = function onLoad() {\n          removeListener(image, EVENT_ERROR, onError);\n          _this2.load();\n        }, {\n          once: true\n        });\n        addListener(image, EVENT_ERROR, onError = function onError() {\n          removeListener(image, EVENT_LOAD, onLoad);\n          if (_this2.timeout) {\n            clearTimeout(_this2.timeout);\n            _this2.timeout = false;\n          }\n          removeClass(image, CLASS_INVISIBLE);\n          if (options.loading) {\n            removeClass(_this2.canvas, CLASS_LOADING);\n          }\n        }, {\n          once: true\n        });\n        if (this.timeout) {\n          clearTimeout(this.timeout);\n        }\n\n        // Make the image visible if it fails to load within 1s\n        this.timeout = setTimeout(function () {\n          removeClass(image, CLASS_INVISIBLE);\n          _this2.timeout = false;\n        }, 1000);\n      }\n      return this;\n    },\n    /**\n     * View the previous image\n     * @param {boolean} [loop=false] - Indicate if view the last one\n     * when it is the first one at present.\n     * @returns {Viewer} this\n     */\n    prev: function prev() {\n      var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var index = this.index - 1;\n      if (index < 0) {\n        index = loop ? this.length - 1 : 0;\n      }\n      this.view(index);\n      return this;\n    },\n    /**\n     * View the next image\n     * @param {boolean} [loop=false] - Indicate if view the first one\n     * when it is the last one at present.\n     * @returns {Viewer} this\n     */\n    next: function next() {\n      var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var maxIndex = this.length - 1;\n      var index = this.index + 1;\n      if (index > maxIndex) {\n        index = loop ? 0 : maxIndex;\n      }\n      this.view(index);\n      return this;\n    },\n    /**\n     * Move the image with relative offsets.\n     * @param {number} x - The moving distance in the horizontal direction.\n     * @param {number} [y=x] The moving distance in the vertical direction.\n     * @returns {Viewer} this\n     */\n    move: function move(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var imageData = this.imageData;\n      this.moveTo(isUndefined(x) ? x : imageData.x + Number(x), isUndefined(y) ? y : imageData.y + Number(y));\n      return this;\n    },\n    /**\n     * Move the image to an absolute point.\n     * @param {number} x - The new position in the horizontal direction.\n     * @param {number} [y=x] - The new position in the vertical direction.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    moveTo: function moveTo(x) {\n      var _this3 = this;\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var element = this.element,\n        options = this.options,\n        imageData = this.imageData;\n      x = Number(x);\n      y = Number(y);\n      if (this.viewed && !this.played && options.movable) {\n        var oldX = imageData.x;\n        var oldY = imageData.y;\n        var changed = false;\n        if (isNumber(x)) {\n          changed = true;\n        } else {\n          x = oldX;\n        }\n        if (isNumber(y)) {\n          changed = true;\n        } else {\n          y = oldY;\n        }\n        if (changed) {\n          if (isFunction(options.move)) {\n            addListener(element, EVENT_MOVE, options.move, {\n              once: true\n            });\n          }\n          if (dispatchEvent(element, EVENT_MOVE, {\n            x: x,\n            y: y,\n            oldX: oldX,\n            oldY: oldY,\n            originalEvent: _originalEvent\n          }) === false) {\n            return this;\n          }\n          imageData.x = x;\n          imageData.y = y;\n          imageData.left = x;\n          imageData.top = y;\n          this.moving = true;\n          this.renderImage(function () {\n            _this3.moving = false;\n            if (isFunction(options.moved)) {\n              addListener(element, EVENT_MOVED, options.moved, {\n                once: true\n              });\n            }\n            dispatchEvent(element, EVENT_MOVED, {\n              x: x,\n              y: y,\n              oldX: oldX,\n              oldY: oldY,\n              originalEvent: _originalEvent\n            }, {\n              cancelable: false\n            });\n          });\n        }\n      }\n      return this;\n    },\n    /**\n     * Rotate the image with a relative degree.\n     * @param {number} degree - The rotate degree.\n     * @returns {Viewer} this\n     */\n    rotate: function rotate(degree) {\n      this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n      return this;\n    },\n    /**\n     * Rotate the image to an absolute degree.\n     * @param {number} degree - The rotate degree.\n     * @returns {Viewer} this\n     */\n    rotateTo: function rotateTo(degree) {\n      var _this4 = this;\n      var element = this.element,\n        options = this.options,\n        imageData = this.imageData;\n      degree = Number(degree);\n      if (isNumber(degree) && this.viewed && !this.played && options.rotatable) {\n        var oldDegree = imageData.rotate;\n        if (isFunction(options.rotate)) {\n          addListener(element, EVENT_ROTATE, options.rotate, {\n            once: true\n          });\n        }\n        if (dispatchEvent(element, EVENT_ROTATE, {\n          degree: degree,\n          oldDegree: oldDegree\n        }) === false) {\n          return this;\n        }\n        imageData.rotate = degree;\n        this.rotating = true;\n        this.renderImage(function () {\n          _this4.rotating = false;\n          if (isFunction(options.rotated)) {\n            addListener(element, EVENT_ROTATED, options.rotated, {\n              once: true\n            });\n          }\n          dispatchEvent(element, EVENT_ROTATED, {\n            degree: degree,\n            oldDegree: oldDegree\n          }, {\n            cancelable: false\n          });\n        });\n      }\n      return this;\n    },\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Viewer} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      this.scale(_scaleX, this.imageData.scaleY);\n      return this;\n    },\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Viewer} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      this.scale(this.imageData.scaleX, _scaleY);\n      return this;\n    },\n    /**\n     * Scale the image.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Viewer} this\n     */\n    scale: function scale(scaleX) {\n      var _this5 = this;\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var element = this.element,\n        options = this.options,\n        imageData = this.imageData;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n      if (this.viewed && !this.played && options.scalable) {\n        var oldScaleX = imageData.scaleX;\n        var oldScaleY = imageData.scaleY;\n        var changed = false;\n        if (isNumber(scaleX)) {\n          changed = true;\n        } else {\n          scaleX = oldScaleX;\n        }\n        if (isNumber(scaleY)) {\n          changed = true;\n        } else {\n          scaleY = oldScaleY;\n        }\n        if (changed) {\n          if (isFunction(options.scale)) {\n            addListener(element, EVENT_SCALE, options.scale, {\n              once: true\n            });\n          }\n          if (dispatchEvent(element, EVENT_SCALE, {\n            scaleX: scaleX,\n            scaleY: scaleY,\n            oldScaleX: oldScaleX,\n            oldScaleY: oldScaleY\n          }) === false) {\n            return this;\n          }\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n          this.scaling = true;\n          this.renderImage(function () {\n            _this5.scaling = false;\n            if (isFunction(options.scaled)) {\n              addListener(element, EVENT_SCALED, options.scaled, {\n                once: true\n              });\n            }\n            dispatchEvent(element, EVENT_SCALED, {\n              scaleX: scaleX,\n              scaleY: scaleY,\n              oldScaleX: oldScaleX,\n              oldScaleY: oldScaleY\n            }, {\n              cancelable: false\n            });\n          });\n        }\n      }\n      return this;\n    },\n    /**\n     * Zoom the image with a relative ratio.\n     * @param {number} ratio - The target ratio.\n     * @param {boolean} [showTooltip=false] - Indicates whether to show the tooltip.\n     * @param {Object} [pivot] - The pivot point coordinate for zooming.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    zoom: function zoom(ratio) {\n      var showTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var pivot = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var _originalEvent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      var imageData = this.imageData;\n      ratio = Number(ratio);\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n      this.zoomTo(imageData.width * ratio / imageData.naturalWidth, showTooltip, pivot, _originalEvent);\n      return this;\n    },\n    /**\n     * Zoom the image to an absolute ratio.\n     * @param {number} ratio - The target ratio.\n     * @param {boolean} [showTooltip] - Indicates whether to show the tooltip.\n     * @param {Object} [pivot] - The pivot point coordinate for zooming.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @param {Event} [_zoomable=false] - Indicates if the current zoom is available or not.\n     * @returns {Viewer} this\n     */\n    zoomTo: function zoomTo(ratio) {\n      var _this6 = this;\n      var showTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var pivot = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var _originalEvent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      var _zoomable = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n      var element = this.element,\n        options = this.options,\n        pointers = this.pointers,\n        imageData = this.imageData;\n      var x = imageData.x,\n        y = imageData.y,\n        width = imageData.width,\n        height = imageData.height,\n        naturalWidth = imageData.naturalWidth,\n        naturalHeight = imageData.naturalHeight;\n      ratio = Math.max(0, ratio);\n      if (isNumber(ratio) && this.viewed && !this.played && (_zoomable || options.zoomable)) {\n        if (!_zoomable) {\n          var minZoomRatio = Math.max(0.01, options.minZoomRatio);\n          var maxZoomRatio = Math.min(100, options.maxZoomRatio);\n          ratio = Math.min(Math.max(ratio, minZoomRatio), maxZoomRatio);\n        }\n        if (_originalEvent) {\n          switch (_originalEvent.type) {\n            case 'wheel':\n              if (options.zoomRatio >= 0.055 && ratio > 0.95 && ratio < 1.05) {\n                ratio = 1;\n              }\n              break;\n            case 'pointermove':\n            case 'touchmove':\n            case 'mousemove':\n              if (ratio > 0.99 && ratio < 1.01) {\n                ratio = 1;\n              }\n              break;\n          }\n        }\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n        var offsetWidth = newWidth - width;\n        var offsetHeight = newHeight - height;\n        var oldRatio = imageData.ratio;\n        if (isFunction(options.zoom)) {\n          addListener(element, EVENT_ZOOM, options.zoom, {\n            once: true\n          });\n        }\n        if (dispatchEvent(element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: oldRatio,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n        this.zooming = true;\n        if (_originalEvent) {\n          var offset = getOffset(this.viewer);\n          var center = pointers && Object.keys(pointers).length > 0 ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          };\n\n          // Zoom from the triggering point of the event\n          imageData.x -= offsetWidth * ((center.pageX - offset.left - x) / width);\n          imageData.y -= offsetHeight * ((center.pageY - offset.top - y) / height);\n        } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n          imageData.x -= offsetWidth * ((pivot.x - x) / width);\n          imageData.y -= offsetHeight * ((pivot.y - y) / height);\n        } else {\n          // Zoom from the center of the image\n          imageData.x -= offsetWidth / 2;\n          imageData.y -= offsetHeight / 2;\n        }\n        imageData.left = imageData.x;\n        imageData.top = imageData.y;\n        imageData.width = newWidth;\n        imageData.height = newHeight;\n        imageData.oldRatio = oldRatio;\n        imageData.ratio = ratio;\n        this.renderImage(function () {\n          _this6.zooming = false;\n          if (isFunction(options.zoomed)) {\n            addListener(element, EVENT_ZOOMED, options.zoomed, {\n              once: true\n            });\n          }\n          dispatchEvent(element, EVENT_ZOOMED, {\n            ratio: ratio,\n            oldRatio: oldRatio,\n            originalEvent: _originalEvent\n          }, {\n            cancelable: false\n          });\n        });\n        if (showTooltip) {\n          this.tooltip();\n        }\n      }\n      return this;\n    },\n    /**\n     * Play the images\n     * @param {boolean|FullscreenOptions} [fullscreen=false] - Indicate if request fullscreen or not.\n     * @returns {Viewer} this\n     */\n    play: function play() {\n      var _this7 = this;\n      var fullscreen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!this.isShown || this.played) {\n        return this;\n      }\n      var element = this.element,\n        options = this.options;\n      if (isFunction(options.play)) {\n        addListener(element, EVENT_PLAY, options.play, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_PLAY) === false) {\n        return this;\n      }\n      var player = this.player;\n      var onLoad = this.loadImage.bind(this);\n      var list = [];\n      var total = 0;\n      var index = 0;\n      this.played = true;\n      this.onLoadWhenPlay = onLoad;\n      if (fullscreen) {\n        this.requestFullscreen(fullscreen);\n      }\n      addClass(player, CLASS_SHOW);\n      forEach(this.items, function (item, i) {\n        var img = item.querySelector('img');\n        var image = document.createElement('img');\n        image.src = getData(img, 'originalUrl');\n        image.alt = img.getAttribute('alt');\n        image.referrerPolicy = img.referrerPolicy;\n        total += 1;\n        addClass(image, CLASS_FADE);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n        if (hasClass(item, CLASS_ACTIVE)) {\n          addClass(image, CLASS_IN);\n          index = i;\n        }\n        list.push(image);\n        addListener(image, EVENT_LOAD, onLoad, {\n          once: true\n        });\n        player.appendChild(image);\n      });\n      if (isNumber(options.interval) && options.interval > 0) {\n        var prev = function prev() {\n          clearTimeout(_this7.playing.timeout);\n          removeClass(list[index], CLASS_IN);\n          index -= 1;\n          index = index >= 0 ? index : total - 1;\n          addClass(list[index], CLASS_IN);\n          _this7.playing.timeout = setTimeout(prev, options.interval);\n        };\n        var next = function next() {\n          clearTimeout(_this7.playing.timeout);\n          removeClass(list[index], CLASS_IN);\n          index += 1;\n          index = index < total ? index : 0;\n          addClass(list[index], CLASS_IN);\n          _this7.playing.timeout = setTimeout(next, options.interval);\n        };\n        if (total > 1) {\n          this.playing = {\n            prev: prev,\n            next: next,\n            timeout: setTimeout(next, options.interval)\n          };\n        }\n      }\n      return this;\n    },\n    // Stop play\n    stop: function stop() {\n      var _this8 = this;\n      if (!this.played) {\n        return this;\n      }\n      var element = this.element,\n        options = this.options;\n      if (isFunction(options.stop)) {\n        addListener(element, EVENT_STOP, options.stop, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_STOP) === false) {\n        return this;\n      }\n      var player = this.player;\n      clearTimeout(this.playing.timeout);\n      this.playing = false;\n      this.played = false;\n      forEach(player.getElementsByTagName('img'), function (image) {\n        removeListener(image, EVENT_LOAD, _this8.onLoadWhenPlay);\n      });\n      removeClass(player, CLASS_SHOW);\n      player.innerHTML = '';\n      this.exitFullscreen();\n      return this;\n    },\n    // Enter modal mode (only available in inline mode)\n    full: function full() {\n      var _this9 = this;\n      var options = this.options,\n        viewer = this.viewer,\n        image = this.image,\n        list = this.list;\n      if (!this.isShown || this.played || this.fulled || !options.inline) {\n        return this;\n      }\n      this.fulled = true;\n      this.open();\n      addClass(this.button, CLASS_FULLSCREEN_EXIT);\n      if (options.transition) {\n        removeClass(list, CLASS_TRANSITION);\n        if (this.viewed) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n      }\n      addClass(viewer, CLASS_FIXED);\n      viewer.setAttribute('role', 'dialog');\n      viewer.setAttribute('aria-labelledby', this.title.id);\n      viewer.setAttribute('aria-modal', true);\n      viewer.removeAttribute('style');\n      setStyle(viewer, {\n        zIndex: options.zIndex\n      });\n      if (options.focus) {\n        this.enforceFocus();\n      }\n      this.initContainer();\n      this.viewerData = assign({}, this.containerData);\n      this.renderList();\n      if (this.viewed) {\n        this.initImage(function () {\n          _this9.renderImage(function () {\n            if (options.transition) {\n              setTimeout(function () {\n                addClass(image, CLASS_TRANSITION);\n                addClass(list, CLASS_TRANSITION);\n              }, 0);\n            }\n          });\n        });\n      }\n      return this;\n    },\n    // Exit modal mode (only available in inline mode)\n    exit: function exit() {\n      var _this10 = this;\n      var options = this.options,\n        viewer = this.viewer,\n        image = this.image,\n        list = this.list;\n      if (!this.isShown || this.played || !this.fulled || !options.inline) {\n        return this;\n      }\n      this.fulled = false;\n      this.close();\n      removeClass(this.button, CLASS_FULLSCREEN_EXIT);\n      if (options.transition) {\n        removeClass(list, CLASS_TRANSITION);\n        if (this.viewed) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n      }\n      if (options.focus) {\n        this.clearEnforceFocus();\n      }\n      viewer.removeAttribute('role');\n      viewer.removeAttribute('aria-labelledby');\n      viewer.removeAttribute('aria-modal');\n      removeClass(viewer, CLASS_FIXED);\n      setStyle(viewer, {\n        zIndex: options.zIndexInline\n      });\n      this.viewerData = assign({}, this.parentData);\n      this.renderViewer();\n      this.renderList();\n      if (this.viewed) {\n        this.initImage(function () {\n          _this10.renderImage(function () {\n            if (options.transition) {\n              setTimeout(function () {\n                addClass(image, CLASS_TRANSITION);\n                addClass(list, CLASS_TRANSITION);\n              }, 0);\n            }\n          });\n        });\n      }\n      return this;\n    },\n    // Show the current ratio of the image with percentage\n    tooltip: function tooltip() {\n      var _this11 = this;\n      var options = this.options,\n        tooltipBox = this.tooltipBox,\n        imageData = this.imageData;\n      if (!this.viewed || this.played || !options.tooltip) {\n        return this;\n      }\n      tooltipBox.textContent = \"\".concat(Math.round(imageData.ratio * 100), \"%\");\n      if (!this.tooltipping) {\n        if (options.transition) {\n          if (this.fading) {\n            dispatchEvent(tooltipBox, EVENT_TRANSITION_END);\n          }\n          addClass(tooltipBox, CLASS_SHOW);\n          addClass(tooltipBox, CLASS_FADE);\n          addClass(tooltipBox, CLASS_TRANSITION);\n          tooltipBox.removeAttribute('aria-hidden');\n\n          // Force reflow to enable CSS3 transition\n          tooltipBox.initialOffsetWidth = tooltipBox.offsetWidth;\n          addClass(tooltipBox, CLASS_IN);\n        } else {\n          addClass(tooltipBox, CLASS_SHOW);\n          tooltipBox.removeAttribute('aria-hidden');\n        }\n      } else {\n        clearTimeout(this.tooltipping);\n      }\n      this.tooltipping = setTimeout(function () {\n        if (options.transition) {\n          addListener(tooltipBox, EVENT_TRANSITION_END, function () {\n            removeClass(tooltipBox, CLASS_SHOW);\n            removeClass(tooltipBox, CLASS_FADE);\n            removeClass(tooltipBox, CLASS_TRANSITION);\n            tooltipBox.setAttribute('aria-hidden', true);\n            _this11.fading = false;\n          }, {\n            once: true\n          });\n          removeClass(tooltipBox, CLASS_IN);\n          _this11.fading = true;\n        } else {\n          removeClass(tooltipBox, CLASS_SHOW);\n          tooltipBox.setAttribute('aria-hidden', true);\n        }\n        _this11.tooltipping = false;\n      }, 1000);\n      return this;\n    },\n    /**\n     * Toggle the image size between its current size and natural size\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    toggle: function toggle() {\n      var _originalEvent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      if (this.imageData.ratio === 1) {\n        this.zoomTo(this.imageData.oldRatio, true, null, _originalEvent);\n      } else {\n        this.zoomTo(1, true, null, _originalEvent);\n      }\n      return this;\n    },\n    // Reset the image to its initial state\n    reset: function reset() {\n      if (this.viewed && !this.played) {\n        this.imageData = assign({}, this.initialImageData);\n        this.renderImage();\n      }\n      return this;\n    },\n    // Update viewer when images changed\n    update: function update() {\n      var _this12 = this;\n      var element = this.element,\n        options = this.options,\n        isImg = this.isImg;\n\n      // Destroy viewer if the target image was deleted\n      if (isImg && !element.parentNode) {\n        return this.destroy();\n      }\n      var images = [];\n      forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n        if (isFunction(options.filter)) {\n          if (options.filter.call(_this12, image)) {\n            images.push(image);\n          }\n        } else if (_this12.getImageURL(image)) {\n          images.push(image);\n        }\n      });\n      if (!images.length) {\n        return this;\n      }\n      this.images = images;\n      this.length = images.length;\n      if (this.ready) {\n        var changedIndexes = [];\n        forEach(this.items, function (item, i) {\n          var img = item.querySelector('img');\n          var image = images[i];\n          if (image && img) {\n            if (image.src !== img.src\n\n            // Title changed (#408)\n            || image.alt !== img.alt) {\n              changedIndexes.push(i);\n            }\n          } else {\n            changedIndexes.push(i);\n          }\n        });\n        setStyle(this.list, {\n          width: 'auto'\n        });\n        this.initList();\n        if (this.isShown) {\n          if (this.length) {\n            if (this.viewed) {\n              var changedIndex = changedIndexes.indexOf(this.index);\n              if (changedIndex >= 0) {\n                this.viewed = false;\n                this.view(Math.max(Math.min(this.index - changedIndex, this.length - 1), 0));\n              } else {\n                var activeItem = this.items[this.index];\n\n                // Reactivate the current viewing item after reset the list.\n                addClass(activeItem, CLASS_ACTIVE);\n                activeItem.setAttribute('aria-selected', true);\n              }\n            }\n          } else {\n            this.image = null;\n            this.viewed = false;\n            this.index = 0;\n            this.imageData = {};\n            this.canvas.innerHTML = '';\n            this.title.innerHTML = '';\n          }\n        }\n      } else {\n        this.build();\n      }\n      return this;\n    },\n    // Destroy the viewer\n    destroy: function destroy() {\n      var element = this.element,\n        options = this.options;\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n      this.destroyed = true;\n      if (this.ready) {\n        if (this.played) {\n          this.stop();\n        }\n        if (options.inline) {\n          if (this.fulled) {\n            this.exit();\n          }\n          this.unbind();\n        } else if (this.isShown) {\n          if (this.viewing) {\n            if (this.imageRendering) {\n              this.imageRendering.abort();\n            } else if (this.imageInitializing) {\n              this.imageInitializing.abort();\n            }\n          }\n          if (this.hiding) {\n            this.transitioning.abort();\n          }\n          this.hidden();\n        } else if (this.showing) {\n          this.transitioning.abort();\n          this.hidden();\n        }\n        this.ready = false;\n        this.viewer.parentNode.removeChild(this.viewer);\n      } else if (options.inline) {\n        if (this.delaying) {\n          this.delaying.abort();\n        } else if (this.initializing) {\n          this.initializing.abort();\n        }\n      }\n      if (!options.inline) {\n        removeListener(element, EVENT_CLICK, this.onStart);\n      }\n      element[NAMESPACE] = undefined;\n      return this;\n    }\n  };\n  var others = {\n    getImageURL: function getImageURL(image) {\n      var url = this.options.url;\n      if (isString(url)) {\n        url = image.getAttribute(url);\n      } else if (isFunction(url)) {\n        url = url.call(this, image);\n      } else {\n        url = '';\n      }\n      return url;\n    },\n    enforceFocus: function enforceFocus() {\n      var _this = this;\n      this.clearEnforceFocus();\n      addListener(document, EVENT_FOCUSIN, this.onFocusin = function (event) {\n        var viewer = _this.viewer;\n        var target = event.target;\n        if (target === document || target === viewer || viewer.contains(target)) {\n          return;\n        }\n        while (target) {\n          // Avoid conflicts with other modals (#474, #540)\n          if (target.getAttribute('tabindex') !== null || target.getAttribute('aria-modal') === 'true') {\n            return;\n          }\n          target = target.parentElement;\n        }\n        viewer.focus();\n      });\n    },\n    clearEnforceFocus: function clearEnforceFocus() {\n      if (this.onFocusin) {\n        removeListener(document, EVENT_FOCUSIN, this.onFocusin);\n        this.onFocusin = null;\n      }\n    },\n    open: function open() {\n      var body = this.body;\n      addClass(body, CLASS_OPEN);\n      if (this.scrollbarWidth > 0) {\n        body.style.paddingRight = \"\".concat(this.scrollbarWidth + (parseFloat(this.initialBodyComputedPaddingRight) || 0), \"px\");\n      }\n    },\n    close: function close() {\n      var body = this.body;\n      removeClass(body, CLASS_OPEN);\n      if (this.scrollbarWidth > 0) {\n        body.style.paddingRight = this.initialBodyPaddingRight;\n      }\n    },\n    shown: function shown() {\n      var element = this.element,\n        options = this.options,\n        viewer = this.viewer;\n      this.fulled = true;\n      this.isShown = true;\n      this.render();\n      this.bind();\n      this.showing = false;\n      if (options.focus) {\n        viewer.focus();\n        this.enforceFocus();\n      }\n      if (isFunction(options.shown)) {\n        addListener(element, EVENT_SHOWN, options.shown, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_SHOWN) === false) {\n        return;\n      }\n      if (this.ready && this.isShown && !this.hiding) {\n        this.view(this.index);\n      }\n    },\n    hidden: function hidden() {\n      var element = this.element,\n        options = this.options,\n        viewer = this.viewer;\n      if (options.fucus) {\n        this.clearEnforceFocus();\n      }\n      this.close();\n      this.unbind();\n      addClass(viewer, CLASS_HIDE);\n      viewer.removeAttribute('role');\n      viewer.removeAttribute('aria-labelledby');\n      viewer.removeAttribute('aria-modal');\n      viewer.setAttribute('aria-hidden', true);\n      this.resetList();\n      this.resetImage();\n      this.fulled = false;\n      this.viewed = false;\n      this.isShown = false;\n      this.hiding = false;\n      if (!this.destroyed) {\n        if (isFunction(options.hidden)) {\n          addListener(element, EVENT_HIDDEN, options.hidden, {\n            once: true\n          });\n        }\n        dispatchEvent(element, EVENT_HIDDEN, null, {\n          cancelable: false\n        });\n      }\n    },\n    requestFullscreen: function requestFullscreen(options) {\n      var document = this.element.ownerDocument;\n      if (this.fulled && !(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n        var documentElement = document.documentElement;\n\n        // Element.requestFullscreen()\n        if (documentElement.requestFullscreen) {\n          // Avoid TypeError when convert `options` to dictionary\n          if (isPlainObject(options)) {\n            documentElement.requestFullscreen(options);\n          } else {\n            documentElement.requestFullscreen();\n          }\n        } else if (documentElement.webkitRequestFullscreen) {\n          documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        } else if (documentElement.mozRequestFullScreen) {\n          documentElement.mozRequestFullScreen();\n        } else if (documentElement.msRequestFullscreen) {\n          documentElement.msRequestFullscreen();\n        }\n      }\n    },\n    exitFullscreen: function exitFullscreen() {\n      var document = this.element.ownerDocument;\n      if (this.fulled && (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n        // Document.exitFullscreen()\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        } else if (document.webkitExitFullscreen) {\n          document.webkitExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n          document.mozCancelFullScreen();\n        } else if (document.msExitFullscreen) {\n          document.msExitFullscreen();\n        }\n      }\n    },\n    change: function change(event) {\n      var options = this.options,\n        pointers = this.pointers;\n      var pointer = pointers[Object.keys(pointers)[0]];\n\n      // In the case of the `pointers` object is empty (#421)\n      if (!pointer) {\n        return;\n      }\n      var offsetX = pointer.endX - pointer.startX;\n      var offsetY = pointer.endY - pointer.startY;\n      switch (this.action) {\n        // Move the current image\n        case ACTION_MOVE:\n          if (offsetX !== 0 || offsetY !== 0) {\n            this.pointerMoved = true;\n            this.move(offsetX, offsetY, event);\n          }\n          break;\n\n        // Zoom the current image\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), false, null, event);\n          break;\n        case ACTION_SWITCH:\n          {\n            this.action = 'switched';\n            var absoluteOffsetX = Math.abs(offsetX);\n            if (absoluteOffsetX > 1 && absoluteOffsetX > Math.abs(offsetY)) {\n              // Empty `pointers` as `touchend` event will not be fired after swiped in iOS browsers.\n              this.pointers = {};\n              if (offsetX > 1) {\n                this.prev(options.loop);\n              } else if (offsetX < -1) {\n                this.next(options.loop);\n              }\n            }\n            break;\n          }\n      }\n\n      // Override\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    },\n    isSwitchable: function isSwitchable() {\n      var imageData = this.imageData,\n        viewerData = this.viewerData;\n      return this.length > 1 && imageData.x >= 0 && imageData.y >= 0 && imageData.width <= viewerData.width && imageData.height <= viewerData.height;\n    }\n  };\n  var AnotherViewer = WINDOW.Viewer;\n  var getUniqueID = function (id) {\n    return function () {\n      id += 1;\n      return id;\n    };\n  }(-1);\n  var Viewer = /*#__PURE__*/function () {\n    /**\n     * Create a new Viewer.\n     * @param {Element} element - The target element for viewing.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Viewer(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      _classCallCheck(this, Viewer);\n      if (!element || element.nodeType !== 1) {\n        throw new Error('The first argument is required and must be an element.');\n      }\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.action = false;\n      this.fading = false;\n      this.fulled = false;\n      this.hiding = false;\n      this.imageClicked = false;\n      this.imageData = {};\n      this.index = this.options.initialViewIndex;\n      this.isImg = false;\n      this.isShown = false;\n      this.length = 0;\n      this.moving = false;\n      this.played = false;\n      this.playing = false;\n      this.pointers = {};\n      this.ready = false;\n      this.rotating = false;\n      this.scaling = false;\n      this.showing = false;\n      this.timeout = false;\n      this.tooltipping = false;\n      this.viewed = false;\n      this.viewing = false;\n      this.wheeling = false;\n      this.zooming = false;\n      this.pointerMoved = false;\n      this.id = getUniqueID();\n      this.init();\n    }\n    _createClass(Viewer, [{\n      key: \"init\",\n      value: function init() {\n        var _this = this;\n        var element = this.element,\n          options = this.options;\n        if (element[NAMESPACE]) {\n          return;\n        }\n        element[NAMESPACE] = this;\n\n        // The `focus` option requires the `keyboard` option set to `true`.\n        if (options.focus && !options.keyboard) {\n          options.focus = false;\n        }\n        var isImg = element.localName === 'img';\n        var images = [];\n        forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n          if (isFunction(options.filter)) {\n            if (options.filter.call(_this, image)) {\n              images.push(image);\n            }\n          } else if (_this.getImageURL(image)) {\n            images.push(image);\n          }\n        });\n        this.isImg = isImg;\n        this.length = images.length;\n        this.images = images;\n        this.initBody();\n\n        // Override `transition` option if it is not supported\n        if (isUndefined(document.createElement(NAMESPACE).style.transition)) {\n          options.transition = false;\n        }\n        if (options.inline) {\n          var count = 0;\n          var progress = function progress() {\n            count += 1;\n            if (count === _this.length) {\n              var timeout;\n              _this.initializing = false;\n              _this.delaying = {\n                abort: function abort() {\n                  clearTimeout(timeout);\n                }\n              };\n\n              // build asynchronously to keep `this.viewer` is accessible in `ready` event handler.\n              timeout = setTimeout(function () {\n                _this.delaying = false;\n                _this.build();\n              }, 0);\n            }\n          };\n          this.initializing = {\n            abort: function abort() {\n              forEach(images, function (image) {\n                if (!image.complete) {\n                  removeListener(image, EVENT_LOAD, progress);\n                  removeListener(image, EVENT_ERROR, progress);\n                }\n              });\n            }\n          };\n          forEach(images, function (image) {\n            if (image.complete) {\n              progress();\n            } else {\n              var onLoad;\n              var onError;\n              addListener(image, EVENT_LOAD, onLoad = function onLoad() {\n                removeListener(image, EVENT_ERROR, onError);\n                progress();\n              }, {\n                once: true\n              });\n              addListener(image, EVENT_ERROR, onError = function onError() {\n                removeListener(image, EVENT_LOAD, onLoad);\n                progress();\n              }, {\n                once: true\n              });\n            }\n          });\n        } else {\n          addListener(element, EVENT_CLICK, this.onStart = function (_ref) {\n            var target = _ref.target;\n            if (target.localName === 'img' && (!isFunction(options.filter) || options.filter.call(_this, target))) {\n              _this.view(_this.images.indexOf(target));\n            }\n          });\n        }\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (this.ready) {\n          return;\n        }\n        var element = this.element,\n          options = this.options;\n        var parent = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var viewer = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var title = viewer.querySelector(\".\".concat(NAMESPACE, \"-title\"));\n        var toolbar = viewer.querySelector(\".\".concat(NAMESPACE, \"-toolbar\"));\n        var navbar = viewer.querySelector(\".\".concat(NAMESPACE, \"-navbar\"));\n        var button = viewer.querySelector(\".\".concat(NAMESPACE, \"-button\"));\n        var canvas = viewer.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        this.parent = parent;\n        this.viewer = viewer;\n        this.title = title;\n        this.toolbar = toolbar;\n        this.navbar = navbar;\n        this.button = button;\n        this.canvas = canvas;\n        this.footer = viewer.querySelector(\".\".concat(NAMESPACE, \"-footer\"));\n        this.tooltipBox = viewer.querySelector(\".\".concat(NAMESPACE, \"-tooltip\"));\n        this.player = viewer.querySelector(\".\".concat(NAMESPACE, \"-player\"));\n        this.list = viewer.querySelector(\".\".concat(NAMESPACE, \"-list\"));\n        viewer.id = \"\".concat(NAMESPACE).concat(this.id);\n        title.id = \"\".concat(NAMESPACE, \"Title\").concat(this.id);\n        addClass(title, !options.title ? CLASS_HIDE : getResponsiveClass(Array.isArray(options.title) ? options.title[0] : options.title));\n        addClass(navbar, !options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));\n        toggleClass(button, CLASS_HIDE, !options.button);\n        if (options.keyboard) {\n          button.setAttribute('tabindex', 0);\n        }\n        if (options.backdrop) {\n          addClass(viewer, \"\".concat(NAMESPACE, \"-backdrop\"));\n          if (!options.inline && options.backdrop !== 'static') {\n            setData(canvas, DATA_ACTION, 'hide');\n          }\n        }\n        if (isString(options.className) && options.className) {\n          // In case there are multiple class names\n          options.className.split(REGEXP_SPACES).forEach(function (className) {\n            addClass(viewer, className);\n          });\n        }\n        if (options.toolbar) {\n          var list = document.createElement('ul');\n          var custom = isPlainObject(options.toolbar);\n          var zoomButtons = BUTTONS.slice(0, 3);\n          var rotateButtons = BUTTONS.slice(7, 9);\n          var scaleButtons = BUTTONS.slice(9);\n          if (!custom) {\n            addClass(toolbar, getResponsiveClass(options.toolbar));\n          }\n          forEach(custom ? options.toolbar : BUTTONS, function (value, index) {\n            var deep = custom && isPlainObject(value);\n            var name = custom ? hyphenate(index) : value;\n            var show = deep && !isUndefined(value.show) ? value.show : value;\n            if (!show || !options.zoomable && zoomButtons.indexOf(name) !== -1 || !options.rotatable && rotateButtons.indexOf(name) !== -1 || !options.scalable && scaleButtons.indexOf(name) !== -1) {\n              return;\n            }\n            var size = deep && !isUndefined(value.size) ? value.size : value;\n            var click = deep && !isUndefined(value.click) ? value.click : value;\n            var item = document.createElement('li');\n            if (options.keyboard) {\n              item.setAttribute('tabindex', 0);\n            }\n            item.setAttribute('role', 'button');\n            addClass(item, \"\".concat(NAMESPACE, \"-\").concat(name));\n            if (!isFunction(click)) {\n              setData(item, DATA_ACTION, name);\n            }\n            if (isNumber(show)) {\n              addClass(item, getResponsiveClass(show));\n            }\n            if (['small', 'large'].indexOf(size) !== -1) {\n              addClass(item, \"\".concat(NAMESPACE, \"-\").concat(size));\n            } else if (name === 'play') {\n              addClass(item, \"\".concat(NAMESPACE, \"-large\"));\n            }\n            if (isFunction(click)) {\n              addListener(item, EVENT_CLICK, click);\n            }\n            list.appendChild(item);\n          });\n          toolbar.appendChild(list);\n        } else {\n          addClass(toolbar, CLASS_HIDE);\n        }\n        if (!options.rotatable) {\n          var rotates = toolbar.querySelectorAll('li[class*=\"rotate\"]');\n          addClass(rotates, CLASS_INVISIBLE);\n          forEach(rotates, function (rotate) {\n            toolbar.appendChild(rotate);\n          });\n        }\n        if (options.inline) {\n          addClass(button, CLASS_FULLSCREEN);\n          setStyle(viewer, {\n            zIndex: options.zIndexInline\n          });\n          if (window.getComputedStyle(parent).position === 'static') {\n            setStyle(parent, {\n              position: 'relative'\n            });\n          }\n          parent.insertBefore(viewer, element.nextSibling);\n        } else {\n          addClass(button, CLASS_CLOSE);\n          addClass(viewer, CLASS_FIXED);\n          addClass(viewer, CLASS_FADE);\n          addClass(viewer, CLASS_HIDE);\n          setStyle(viewer, {\n            zIndex: options.zIndex\n          });\n          var container = options.container;\n          if (isString(container)) {\n            container = element.ownerDocument.querySelector(container);\n          }\n          if (!container) {\n            container = this.body;\n          }\n          container.appendChild(viewer);\n        }\n        if (options.inline) {\n          this.render();\n          this.bind();\n          this.isShown = true;\n        }\n        this.ready = true;\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n        if (dispatchEvent(element, EVENT_READY) === false) {\n          this.ready = false;\n          return;\n        }\n        if (this.ready && options.inline) {\n          this.view(this.index);\n        }\n      }\n\n      /**\n       * Get the no conflict viewer class.\n       * @returns {Viewer} The viewer class.\n       */\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Viewer = AnotherViewer;\n        return Viewer;\n      }\n\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n    return Viewer;\n  }();\n  assign(Viewer.prototype, render, events, handlers, methods, others);\n  return Viewer;\n});","map":{"version":3,"names":["global","factory","exports","module","define","amd","globalThis","self","Viewer","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","descriptor","configurable","writable","_toPropertyKey","key","_createClass","protoProps","staticProps","obj","value","_toPrimitive","input","hint","prim","toPrimitive","undefined","res","call","String","Number","arg","DEFAULTS","backdrop","button","navbar","title","toolbar","className","container","fullscreen","inheritedAttributes","initialCoverage","initialViewIndex","inline","interval","keyboard","focus","loading","loop","minWidth","minHeight","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","slideOnTouch","toggleOnDblclick","tooltip","transition","zIndex","zIndexInline","zoomRatio","minZoomRatio","maxZoomRatio","url","ready","show","shown","hide","hidden","view","viewed","move","moved","rotate","rotated","scale","scaled","zoom","zoomed","play","stop","TEMPLATE","IS_BROWSER","window","document","WINDOW","IS_TOUCH_DEVICE","documentElement","HAS_POINTER_EVENT","NAMESPACE","ACTION_MOVE","ACTION_SWITCH","ACTION_ZOOM","CLASS_ACTIVE","concat","CLASS_CLOSE","CLASS_FADE","CLASS_FIXED","CLASS_FULLSCREEN","CLASS_FULLSCREEN_EXIT","CLASS_HIDE","CLASS_HIDE_MD_DOWN","CLASS_HIDE_SM_DOWN","CLASS_HIDE_XS_DOWN","CLASS_IN","CLASS_INVISIBLE","CLASS_LOADING","CLASS_MOVE","CLASS_OPEN","CLASS_SHOW","CLASS_TRANSITION","EVENT_CLICK","EVENT_DBLCLICK","EVENT_DRAG_START","EVENT_FOCUSIN","EVENT_KEY_DOWN","EVENT_LOAD","EVENT_ERROR","EVENT_TOUCH_END","EVENT_TOUCH_MOVE","EVENT_TOUCH_START","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_RESIZE","EVENT_TRANSITION_END","EVENT_WHEEL","EVENT_READY","EVENT_SHOW","EVENT_SHOWN","EVENT_HIDE","EVENT_HIDDEN","EVENT_VIEW","EVENT_VIEWED","EVENT_MOVE","EVENT_MOVED","EVENT_ROTATE","EVENT_ROTATED","EVENT_SCALE","EVENT_SCALED","EVENT_ZOOM","EVENT_ZOOMED","EVENT_PLAY","EVENT_STOP","DATA_ACTION","REGEXP_SPACES","BUTTONS","isString","isNaN","isNumber","isUndefined","isObject","hasOwnProperty","isPlainObject","_constructor","error","isFunction","data","callback","Array","isArray","assign","_len","args","_key","REGEXP_SUFFIX","setStyle","element","styles","style","property","test","escapeHTMLEntities","replace","hasClass","classList","contains","indexOf","addClass","elem","add","trim","removeClass","remove","toggleClass","added","REGEXP_HYPHENATE","hyphenate","toLowerCase","getData","name","dataset","getAttribute","setData","setAttribute","onceSupported","supported","once","listener","options","get","set","addEventListener","removeEventListener","removeListener","type","handler","split","event","listeners","addListener","_handler","_element$listeners","_len2","_key2","dispatchEvent","Event","CustomEvent","bubbles","cancelable","detail","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","pageXOffset","clientLeft","top","pageYOffset","clientTop","getTransforms","_ref","scaleX","scaleY","translateX","translateY","values","transform","join","WebkitTransform","msTransform","getImageNameFromURL","decodeURIComponent","IS_SAFARI","navigator","userAgent","getImageNaturalSizes","image","newImage","createElement","naturalWidth","naturalHeight","body","onload","width","height","removeChild","src","cssText","appendChild","getResponsiveClass","getMaxZoomRatio","pointers","pointers2","ratios","pointer","pointerId","pointer2","x1","Math","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","z2","ratio","sort","a","b","getPointer","_ref2","endOnly","pageX","pageY","end","timeStamp","Date","now","getPointersCenter","count","_ref3","render","initContainer","initViewer","initList","renderViewer","initBody","ownerDocument","scrollbarWidth","innerWidth","clientWidth","initialBodyPaddingRight","paddingRight","initialBodyComputedPaddingRight","getComputedStyle","containerData","innerHeight","parent","viewerData","max","offsetWidth","offsetHeight","parentData","fulled","viewer","_this","list","items","innerHTML","images","index","alt","getImageURL","item","img","firstElementChild","onLoad","onError","loadImage","renderList","next","nextElementSibling","gutter","parseInt","marginLeft","outerWidth","resetList","initImage","done","_this2","footerHeight","footer","viewerWidth","viewerHeight","oldImageData","imageData","sizingImage","imageInitializing","abort","aspectRatio","min","x","y","oldRatio","initialImageData","renderImage","_this3","marginTop","viewing","moving","rotating","scaling","zooming","onTransitionEnd","imageRendering","resetImage","parentNode","events","bind","canvas","onClick","click","onDragStart","dragstart","onPointerDown","pointerdown","onPointerMove","pointermove","onPointerUp","pointerup","onKeyDown","keydown","onResize","resize","onWheel","wheel","passive","capture","onDblclick","dblclick","unbind","handlers","action","localName","parentElement","isTrusted","clearTimeout","clickCanvasTimeout","played","exit","full","pointerMoved","toggle","reset","prev","preventDefault","doubleClickImageTimeout","originalEvent","load","timeout","originalImage","parentWidth","parentHeight","filled","keyCode","which","charCode","playing","ctrlKey","buttons","showing","hiding","pointerType","changedTouches","touch","identifier","isSwitchable","change","imageClicked","setTimeout","isShown","close","open","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","player","getElementsByTagName","_this4","wheeling","delta","deltaY","wheelDelta","methods","immediate","build","transitioning","id","removeAttribute","initialOffsetWidth","hideImmediately","onViewerTransitionEnd","onImageTransitionEnd","zoomTo","querySelector","activeItem","onViewed","complete","maxIndex","moveTo","_originalEvent","oldX","oldY","changed","degree","rotateTo","oldDegree","_scaleX","_scaleY","_this5","oldScaleX","oldScaleY","showTooltip","pivot","_this6","_zoomable","newWidth","newHeight","offset","center","_this7","total","onLoadWhenPlay","requestFullscreen","referrerPolicy","_this8","exitFullscreen","_this9","enforceFocus","_this10","clearEnforceFocus","_this11","tooltipBox","textContent","round","tooltipping","fading","update","_this12","isImg","destroy","querySelectorAll","changedIndexes","changedIndex","destroyed","delaying","initializing","onStart","others","onFocusin","parseFloat","fucus","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","mozRequestFullScreen","msRequestFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","offsetX","offsetY","absoluteOffsetX","p","AnotherViewer","getUniqueID","nodeType","Error","init","progress","template","custom","zoomButtons","slice","rotateButtons","scaleButtons","deep","size","rotates","position","insertBefore","nextSibling","noConflict","setDefaults"],"sources":["/home/bahl/Downloads/tlr_eprc_sprc_inq_uc3_rpt_eprc/fe/node_modules/viewerjs/dist/viewer.js"],"sourcesContent":["/*!\n * Viewer.js v1.11.6\n * https://fengyuanchen.github.io/viewerjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2023-09-17T03:16:38.052Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Viewer = factory());\n})(this, (function () { 'use strict';\n\n  function ownKeys(e, r) {\n    var t = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var o = Object.getOwnPropertySymbols(e);\n      r && (o = o.filter(function (r) {\n        return Object.getOwnPropertyDescriptor(e, r).enumerable;\n      })), t.push.apply(t, o);\n    }\n    return t;\n  }\n  function _objectSpread2(e) {\n    for (var r = 1; r < arguments.length; r++) {\n      var t = null != arguments[r] ? arguments[r] : {};\n      r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n        _defineProperty(e, r, t[r]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n        Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n      });\n    }\n    return e;\n  }\n  function _typeof(o) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n      return typeof o;\n    } : function (o) {\n      return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, _typeof(o);\n  }\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n    }\n  }\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n  function _defineProperty(obj, key, value) {\n    key = _toPropertyKey(key);\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  function _toPrimitive(input, hint) {\n    if (typeof input !== \"object\" || input === null) return input;\n    var prim = input[Symbol.toPrimitive];\n    if (prim !== undefined) {\n      var res = prim.call(input, hint || \"default\");\n      if (typeof res !== \"object\") return res;\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n    return (hint === \"string\" ? String : Number)(input);\n  }\n  function _toPropertyKey(arg) {\n    var key = _toPrimitive(arg, \"string\");\n    return typeof key === \"symbol\" ? key : String(key);\n  }\n\n  var DEFAULTS = {\n    /**\n     * Enable a modal backdrop, specify `static` for a backdrop\n     * which doesn't close the modal on click.\n     * @type {boolean}\n     */\n    backdrop: true,\n    /**\n     * Show the button on the top-right of the viewer.\n     * @type {boolean}\n     */\n    button: true,\n    /**\n     * Show the navbar.\n     * @type {boolean | number}\n     */\n    navbar: true,\n    /**\n     * Specify the visibility and the content of the title.\n     * @type {boolean | number | Function | Array}\n     */\n    title: true,\n    /**\n     * Show the toolbar.\n     * @type {boolean | number | Object}\n     */\n    toolbar: true,\n    /**\n     * Custom class name(s) to add to the viewer's root element.\n     * @type {string}\n     */\n    className: '',\n    /**\n     * Define where to put the viewer in modal mode.\n     * @type {string | Element}\n     */\n    container: 'body',\n    /**\n     * Filter the images for viewing. Return true if the image is viewable.\n     * @type {Function}\n     */\n    filter: null,\n    /**\n     * Enable to request fullscreen when play.\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/FullscreenOptions}\n     * @type {boolean|FullscreenOptions}\n     */\n    fullscreen: true,\n    /**\n     * Define the extra attributes to inherit from the original image.\n     * @type {Array}\n     */\n    inheritedAttributes: ['crossOrigin', 'decoding', 'isMap', 'loading', 'referrerPolicy', 'sizes', 'srcset', 'useMap'],\n    /**\n     * Define the initial coverage of the viewing image.\n     * @type {number}\n     */\n    initialCoverage: 0.9,\n    /**\n     * Define the initial index of the image for viewing.\n     * @type {number}\n     */\n    initialViewIndex: 0,\n    /**\n     * Enable inline mode.\n     * @type {boolean}\n     */\n    inline: false,\n    /**\n     * The amount of time to delay between automatically cycling an image when playing.\n     * @type {number}\n     */\n    interval: 5000,\n    /**\n     * Enable keyboard support.\n     * @type {boolean}\n     */\n    keyboard: true,\n    /**\n     * Focus the viewer when initialized.\n     * @type {boolean}\n     */\n    focus: true,\n    /**\n     * Indicate if show a loading spinner when load image or not.\n     * @type {boolean}\n     */\n    loading: true,\n    /**\n     * Indicate if enable loop viewing or not.\n     * @type {boolean}\n     */\n    loop: true,\n    /**\n     * Min width of the viewer in inline mode.\n     * @type {number}\n     */\n    minWidth: 200,\n    /**\n     * Min height of the viewer in inline mode.\n     * @type {number}\n     */\n    minHeight: 100,\n    /**\n     * Enable to move the image.\n     * @type {boolean}\n     */\n    movable: true,\n    /**\n     * Enable to rotate the image.\n     * @type {boolean}\n     */\n    rotatable: true,\n    /**\n     * Enable to scale the image.\n     * @type {boolean}\n     */\n    scalable: true,\n    /**\n     * Enable to zoom the image.\n     * @type {boolean}\n     */\n    zoomable: true,\n    /**\n     * Enable to zoom the current image by dragging on the touch screen.\n     * @type {boolean}\n     */\n    zoomOnTouch: true,\n    /**\n     * Enable to zoom the image by wheeling mouse.\n     * @type {boolean}\n     */\n    zoomOnWheel: true,\n    /**\n     * Enable to slide to the next or previous image by swiping on the touch screen.\n     * @type {boolean}\n     */\n    slideOnTouch: true,\n    /**\n     * Indicate if toggle the image size between its natural size\n     * and initial size when double click on the image or not.\n     * @type {boolean}\n     */\n    toggleOnDblclick: true,\n    /**\n     * Show the tooltip with image ratio (percentage) when zoom in or zoom out.\n     * @type {boolean}\n     */\n    tooltip: true,\n    /**\n     * Enable CSS3 Transition for some special elements.\n     * @type {boolean}\n     */\n    transition: true,\n    /**\n     * Define the CSS `z-index` value of viewer in modal mode.\n     * @type {number}\n     */\n    zIndex: 2015,\n    /**\n     * Define the CSS `z-index` value of viewer in inline mode.\n     * @type {number}\n     */\n    zIndexInline: 0,\n    /**\n     * Define the ratio when zoom the image by wheeling mouse.\n     * @type {number}\n     */\n    zoomRatio: 0.1,\n    /**\n     * Define the min ratio of the image when zoom out.\n     * @type {number}\n     */\n    minZoomRatio: 0.01,\n    /**\n     * Define the max ratio of the image when zoom in.\n     * @type {number}\n     */\n    maxZoomRatio: 100,\n    /**\n     * Define where to get the original image URL for viewing.\n     * @type {string | Function}\n     */\n    url: 'src',\n    /**\n     * Event shortcuts.\n     * @type {Function}\n     */\n    ready: null,\n    show: null,\n    shown: null,\n    hide: null,\n    hidden: null,\n    view: null,\n    viewed: null,\n    move: null,\n    moved: null,\n    rotate: null,\n    rotated: null,\n    scale: null,\n    scaled: null,\n    zoom: null,\n    zoomed: null,\n    play: null,\n    stop: null\n  };\n\n  var TEMPLATE = '<div class=\"viewer-container\" tabindex=\"-1\" touch-action=\"none\">' + '<div class=\"viewer-canvas\"></div>' + '<div class=\"viewer-footer\">' + '<div class=\"viewer-title\"></div>' + '<div class=\"viewer-toolbar\"></div>' + '<div class=\"viewer-navbar\">' + '<ul class=\"viewer-list\" role=\"navigation\"></ul>' + '</div>' + '</div>' + '<div class=\"viewer-tooltip\" role=\"alert\" aria-hidden=\"true\"></div>' + '<div class=\"viewer-button\" data-viewer-action=\"mix\" role=\"button\"></div>' + '<div class=\"viewer-player\"></div>' + '</div>';\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'viewer';\n\n  // Actions\n  var ACTION_MOVE = 'move';\n  var ACTION_SWITCH = 'switch';\n  var ACTION_ZOOM = 'zoom';\n\n  // Classes\n  var CLASS_ACTIVE = \"\".concat(NAMESPACE, \"-active\");\n  var CLASS_CLOSE = \"\".concat(NAMESPACE, \"-close\");\n  var CLASS_FADE = \"\".concat(NAMESPACE, \"-fade\");\n  var CLASS_FIXED = \"\".concat(NAMESPACE, \"-fixed\");\n  var CLASS_FULLSCREEN = \"\".concat(NAMESPACE, \"-fullscreen\");\n  var CLASS_FULLSCREEN_EXIT = \"\".concat(NAMESPACE, \"-fullscreen-exit\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_HIDE_MD_DOWN = \"\".concat(NAMESPACE, \"-hide-md-down\");\n  var CLASS_HIDE_SM_DOWN = \"\".concat(NAMESPACE, \"-hide-sm-down\");\n  var CLASS_HIDE_XS_DOWN = \"\".concat(NAMESPACE, \"-hide-xs-down\");\n  var CLASS_IN = \"\".concat(NAMESPACE, \"-in\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_LOADING = \"\".concat(NAMESPACE, \"-loading\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\");\n  var CLASS_OPEN = \"\".concat(NAMESPACE, \"-open\");\n  var CLASS_SHOW = \"\".concat(NAMESPACE, \"-show\");\n  var CLASS_TRANSITION = \"\".concat(NAMESPACE, \"-transition\");\n\n  // Native events\n  var EVENT_CLICK = 'click';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_DRAG_START = 'dragstart';\n  var EVENT_FOCUSIN = 'focusin';\n  var EVENT_KEY_DOWN = 'keydown';\n  var EVENT_LOAD = 'load';\n  var EVENT_ERROR = 'error';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_RESIZE = 'resize';\n  var EVENT_TRANSITION_END = 'transitionend';\n  var EVENT_WHEEL = 'wheel';\n\n  // Custom events\n  var EVENT_READY = 'ready';\n  var EVENT_SHOW = 'show';\n  var EVENT_SHOWN = 'shown';\n  var EVENT_HIDE = 'hide';\n  var EVENT_HIDDEN = 'hidden';\n  var EVENT_VIEW = 'view';\n  var EVENT_VIEWED = 'viewed';\n  var EVENT_MOVE = 'move';\n  var EVENT_MOVED = 'moved';\n  var EVENT_ROTATE = 'rotate';\n  var EVENT_ROTATED = 'rotated';\n  var EVENT_SCALE = 'scale';\n  var EVENT_SCALED = 'scaled';\n  var EVENT_ZOOM = 'zoom';\n  var EVENT_ZOOMED = 'zoomed';\n  var EVENT_PLAY = 'play';\n  var EVENT_STOP = 'stop';\n\n  // Data keys\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\n\n  // RegExps\n  var REGEXP_SPACES = /\\s\\s*/;\n\n  // Misc\n  var BUTTONS = ['zoom-in', 'zoom-out', 'one-to-one', 'reset', 'prev', 'play', 'next', 'rotate-left', 'rotate-right', 'flip-horizontal', 'flip-vertical'];\n\n  /**\n   * Check if the given value is a string.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a string, else `false`.\n   */\n  function isString(value) {\n    return typeof value === 'string';\n  }\n\n  /**\n   * Check if the given value is not a number.\n   */\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length) /* array-like */) {\n        var length = data.length;\n        var i;\n        for (i = 0; i < length; i += 1) {\n          if (callback.call(data, data[i], i, data) === false) {\n            break;\n          }\n        }\n      } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n    return data;\n  }\n\n  /**\n   * Extend the given object.\n   * @param {*} obj - The object to be extended.\n   * @param {*} args - The rest objects which will be merged to the first object.\n   * @returns {Object} The extended object.\n   */\n  var assign = Object.assign || function assign(obj) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    if (isObject(obj) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            obj[key] = arg[key];\n          });\n        }\n      });\n    }\n    return obj;\n  };\n  var REGEXP_SUFFIX = /^(?:width|height|left|top|marginLeft|marginTop)$/;\n\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value += 'px';\n      }\n      style[property] = value;\n    });\n  }\n\n  /**\n   * Escape a string for using in HTML.\n   * @param {String} value - The string to escape.\n   * @returns {String} Returns the escaped string.\n   */\n  function escapeHTMLEntities(value) {\n    return isString(value) ? value.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g, '&amp;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;') : value;\n  }\n\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n  function hasClass(element, value) {\n    if (!element || !value) {\n      return false;\n    }\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n  function addClass(element, value) {\n    if (!element || !value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n    var className = element.className.trim();\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n  function removeClass(element, value) {\n    if (!element || !value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    }\n\n    // IE10-11 doesn't support the second parameter of `classList.toggle`\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n  function hyphenate(value) {\n    return value.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n  }\n\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n    return element.getAttribute(\"data-\".concat(hyphenate(name)));\n  }\n\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(hyphenate(name)), data);\n    }\n  }\n  var onceSupported = function () {\n    var supported = false;\n    if (IS_BROWSER) {\n      var once = false;\n      var listener = function listener() {};\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n    return supported;\n  }();\n\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n      element.removeEventListener(event, handler, options);\n    });\n  }\n\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n          listeners = _element$listeners === void 0 ? {} : _element$listeners;\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n          listener.apply(element, args);\n        };\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n      element.addEventListener(event, _handler, options);\n    });\n  }\n\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @param {Object} options - The additional event options.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n  function dispatchEvent(element, type, data, options) {\n    var event;\n\n    // Event and CustomEvent on IE9-11 are global objects, not constructors\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, _objectSpread2({\n        bubbles: true,\n        cancelable: true,\n        detail: data\n      }, options));\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n    return element.dispatchEvent(event);\n  }\n\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n      scaleX = _ref.scaleX,\n      scaleY = _ref.scaleY,\n      translateX = _ref.translateX,\n      translateY = _ref.translateY;\n    var values = [];\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    }\n\n    // Rotate should come first before scale to match orientation transform\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n\n  /**\n   * Get an image name from an image url.\n   * @param {string} url - The target url.\n   * @example\n   * // picture.jpg\n   * getImageNameFromURL('https://domain.com/path/to/picture.jpg?size=1280×960')\n   * @returns {string} A string contains the image name.\n   */\n  function getImageNameFromURL(url) {\n    return isString(url) ? decodeURIComponent(url.replace(/^.*\\//, '').replace(/[?&#].*$/, '')) : '';\n  }\n  var IS_SAFARI = WINDOW.navigator && /Version\\/\\d+(\\.\\d+)+?\\s+Safari/i.test(WINDOW.navigator.userAgent);\n\n  /**\n   * Get an image's natural sizes.\n   * @param {string} image - The target image.\n   * @param {Object} options - The viewer options.\n   * @param {Function} callback - The callback function.\n   * @returns {HTMLImageElement} The new image.\n   */\n  function getImageNaturalSizes(image, options, callback) {\n    var newImage = document.createElement('img');\n\n    // Modern browsers (except Safari)\n    if (image.naturalWidth && !IS_SAFARI) {\n      callback(image.naturalWidth, image.naturalHeight);\n      return newImage;\n    }\n    var body = document.body || document.documentElement;\n    newImage.onload = function () {\n      callback(newImage.width, newImage.height);\n      if (!IS_SAFARI) {\n        body.removeChild(newImage);\n      }\n    };\n    forEach(options.inheritedAttributes, function (name) {\n      var value = image.getAttribute(name);\n      if (value !== null) {\n        newImage.setAttribute(name, value);\n      }\n    });\n    newImage.src = image.src;\n\n    // iOS Safari will convert the image automatically\n    // with its orientation once append it into DOM\n    if (!IS_SAFARI) {\n      newImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n      body.appendChild(newImage);\n    }\n    return newImage;\n  }\n\n  /**\n   * Get the related class name of a responsive type number.\n   * @param {string} type - The responsive type.\n   * @returns {string} The related class name.\n   */\n  function getResponsiveClass(type) {\n    switch (type) {\n      case 2:\n        return CLASS_HIDE_XS_DOWN;\n      case 3:\n        return CLASS_HIDE_SM_DOWN;\n      case 4:\n        return CLASS_HIDE_MD_DOWN;\n      default:\n        return '';\n    }\n  }\n\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n    var ratios = [];\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n        ratios.push(ratio);\n      });\n    });\n    ratios.sort(function (a, b) {\n      return Math.abs(a) < Math.abs(b);\n    });\n    return ratios[0];\n  }\n\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n      pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      timeStamp: Date.now(),\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n        startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initViewer();\n      this.initList();\n      this.renderViewer();\n    },\n    initBody: function initBody() {\n      var ownerDocument = this.element.ownerDocument;\n      var body = ownerDocument.body || ownerDocument.documentElement;\n      this.body = body;\n      this.scrollbarWidth = window.innerWidth - ownerDocument.documentElement.clientWidth;\n      this.initialBodyPaddingRight = body.style.paddingRight;\n      this.initialBodyComputedPaddingRight = window.getComputedStyle(body).paddingRight;\n    },\n    initContainer: function initContainer() {\n      this.containerData = {\n        width: window.innerWidth,\n        height: window.innerHeight\n      };\n    },\n    initViewer: function initViewer() {\n      var options = this.options,\n        parent = this.parent;\n      var viewerData;\n      if (options.inline) {\n        viewerData = {\n          width: Math.max(parent.offsetWidth, options.minWidth),\n          height: Math.max(parent.offsetHeight, options.minHeight)\n        };\n        this.parentData = viewerData;\n      }\n      if (this.fulled || !viewerData) {\n        viewerData = this.containerData;\n      }\n      this.viewerData = assign({}, viewerData);\n    },\n    renderViewer: function renderViewer() {\n      if (this.options.inline && !this.fulled) {\n        setStyle(this.viewer, this.viewerData);\n      }\n    },\n    initList: function initList() {\n      var _this = this;\n      var element = this.element,\n        options = this.options,\n        list = this.list;\n      var items = [];\n\n      // initList may be called in this.update, so should keep idempotent\n      list.innerHTML = '';\n      forEach(this.images, function (image, index) {\n        var src = image.src;\n        var alt = image.alt || getImageNameFromURL(src);\n        var url = _this.getImageURL(image);\n        if (src || url) {\n          var item = document.createElement('li');\n          var img = document.createElement('img');\n          forEach(options.inheritedAttributes, function (name) {\n            var value = image.getAttribute(name);\n            if (value !== null) {\n              img.setAttribute(name, value);\n            }\n          });\n          if (options.navbar) {\n            img.src = src || url;\n          }\n          img.alt = alt;\n          img.setAttribute('data-original-url', url || src);\n          item.setAttribute('data-index', index);\n          item.setAttribute('data-viewer-action', 'view');\n          item.setAttribute('role', 'button');\n          if (options.keyboard) {\n            item.setAttribute('tabindex', 0);\n          }\n          item.appendChild(img);\n          list.appendChild(item);\n          items.push(item);\n        }\n      });\n      this.items = items;\n      forEach(items, function (item) {\n        var image = item.firstElementChild;\n        var onLoad;\n        var onError;\n        setData(image, 'filled', true);\n        if (options.loading) {\n          addClass(item, CLASS_LOADING);\n        }\n        addListener(image, EVENT_LOAD, onLoad = function onLoad(event) {\n          removeListener(image, EVENT_ERROR, onError);\n          if (options.loading) {\n            removeClass(item, CLASS_LOADING);\n          }\n          _this.loadImage(event);\n        }, {\n          once: true\n        });\n        addListener(image, EVENT_ERROR, onError = function onError() {\n          removeListener(image, EVENT_LOAD, onLoad);\n          if (options.loading) {\n            removeClass(item, CLASS_LOADING);\n          }\n        }, {\n          once: true\n        });\n      });\n      if (options.transition) {\n        addListener(element, EVENT_VIEWED, function () {\n          addClass(list, CLASS_TRANSITION);\n        }, {\n          once: true\n        });\n      }\n    },\n    renderList: function renderList() {\n      var index = this.index;\n      var item = this.items[index];\n      if (!item) {\n        return;\n      }\n      var next = item.nextElementSibling;\n      var gutter = parseInt(window.getComputedStyle(next || item).marginLeft, 10);\n      var offsetWidth = item.offsetWidth;\n      var outerWidth = offsetWidth + gutter;\n\n      // Place the active item in the center of the screen\n      setStyle(this.list, assign({\n        width: outerWidth * this.length - gutter\n      }, getTransforms({\n        translateX: (this.viewerData.width - offsetWidth) / 2 - outerWidth * index\n      })));\n    },\n    resetList: function resetList() {\n      var list = this.list;\n      list.innerHTML = '';\n      removeClass(list, CLASS_TRANSITION);\n      setStyle(list, getTransforms({\n        translateX: 0\n      }));\n    },\n    initImage: function initImage(done) {\n      var _this2 = this;\n      var options = this.options,\n        image = this.image,\n        viewerData = this.viewerData;\n      var footerHeight = this.footer.offsetHeight;\n      var viewerWidth = viewerData.width;\n      var viewerHeight = Math.max(viewerData.height - footerHeight, footerHeight);\n      var oldImageData = this.imageData || {};\n      var sizingImage;\n      this.imageInitializing = {\n        abort: function abort() {\n          sizingImage.onload = null;\n        }\n      };\n      sizingImage = getImageNaturalSizes(image, options, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var initialCoverage = Math.max(0, Math.min(1, options.initialCoverage));\n        var width = viewerWidth;\n        var height = viewerHeight;\n        _this2.imageInitializing = false;\n        if (viewerHeight * aspectRatio > viewerWidth) {\n          height = viewerWidth / aspectRatio;\n        } else {\n          width = viewerHeight * aspectRatio;\n        }\n        initialCoverage = isNumber(initialCoverage) ? initialCoverage : 0.9;\n        width = Math.min(width * initialCoverage, naturalWidth);\n        height = Math.min(height * initialCoverage, naturalHeight);\n        var left = (viewerWidth - width) / 2;\n        var top = (viewerHeight - height) / 2;\n        var imageData = {\n          left: left,\n          top: top,\n          x: left,\n          y: top,\n          width: width,\n          height: height,\n          oldRatio: 1,\n          ratio: width / naturalWidth,\n          aspectRatio: aspectRatio,\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight\n        };\n        var initialImageData = assign({}, imageData);\n        if (options.rotatable) {\n          imageData.rotate = oldImageData.rotate || 0;\n          initialImageData.rotate = 0;\n        }\n        if (options.scalable) {\n          imageData.scaleX = oldImageData.scaleX || 1;\n          imageData.scaleY = oldImageData.scaleY || 1;\n          initialImageData.scaleX = 1;\n          initialImageData.scaleY = 1;\n        }\n        _this2.imageData = imageData;\n        _this2.initialImageData = initialImageData;\n        if (done) {\n          done();\n        }\n      });\n    },\n    renderImage: function renderImage(done) {\n      var _this3 = this;\n      var image = this.image,\n        imageData = this.imageData;\n      setStyle(image, assign({\n        width: imageData.width,\n        height: imageData.height,\n        // XXX: Not to use translateX/Y to avoid image shaking when zooming\n        marginLeft: imageData.x,\n        marginTop: imageData.y\n      }, getTransforms(imageData)));\n      if (done) {\n        if ((this.viewing || this.moving || this.rotating || this.scaling || this.zooming) && this.options.transition && hasClass(image, CLASS_TRANSITION)) {\n          var onTransitionEnd = function onTransitionEnd() {\n            _this3.imageRendering = false;\n            done();\n          };\n          this.imageRendering = {\n            abort: function abort() {\n              removeListener(image, EVENT_TRANSITION_END, onTransitionEnd);\n            }\n          };\n          addListener(image, EVENT_TRANSITION_END, onTransitionEnd, {\n            once: true\n          });\n        } else {\n          done();\n        }\n      }\n    },\n    resetImage: function resetImage() {\n      var image = this.image;\n      if (image) {\n        if (this.viewing) {\n          this.viewing.abort();\n        }\n        image.parentNode.removeChild(image);\n        this.image = null;\n        this.title.innerHTML = '';\n      }\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var options = this.options,\n        viewer = this.viewer,\n        canvas = this.canvas;\n      var document = this.element.ownerDocument;\n      addListener(viewer, EVENT_CLICK, this.onClick = this.click.bind(this));\n      addListener(viewer, EVENT_DRAG_START, this.onDragStart = this.dragstart.bind(this));\n      addListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown = this.pointerdown.bind(this));\n      addListener(document, EVENT_POINTER_MOVE, this.onPointerMove = this.pointermove.bind(this));\n      addListener(document, EVENT_POINTER_UP, this.onPointerUp = this.pointerup.bind(this));\n      addListener(document, EVENT_KEY_DOWN, this.onKeyDown = this.keydown.bind(this));\n      addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(viewer, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n      if (options.toggleOnDblclick) {\n        addListener(canvas, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var options = this.options,\n        viewer = this.viewer,\n        canvas = this.canvas;\n      var document = this.element.ownerDocument;\n      removeListener(viewer, EVENT_CLICK, this.onClick);\n      removeListener(viewer, EVENT_DRAG_START, this.onDragStart);\n      removeListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown);\n      removeListener(document, EVENT_POINTER_MOVE, this.onPointerMove);\n      removeListener(document, EVENT_POINTER_UP, this.onPointerUp);\n      removeListener(document, EVENT_KEY_DOWN, this.onKeyDown);\n      removeListener(window, EVENT_RESIZE, this.onResize);\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(viewer, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n      if (options.toggleOnDblclick) {\n        removeListener(canvas, EVENT_DBLCLICK, this.onDblclick);\n      }\n    }\n  };\n\n  var handlers = {\n    click: function click(event) {\n      var options = this.options,\n        imageData = this.imageData;\n      var target = event.target;\n      var action = getData(target, DATA_ACTION);\n      if (!action && target.localName === 'img' && target.parentElement.localName === 'li') {\n        target = target.parentElement;\n        action = getData(target, DATA_ACTION);\n      }\n\n      // Cancel the emulated click when the native click event was triggered.\n      if (IS_TOUCH_DEVICE && event.isTrusted && target === this.canvas) {\n        clearTimeout(this.clickCanvasTimeout);\n      }\n      switch (action) {\n        case 'mix':\n          if (this.played) {\n            this.stop();\n          } else if (options.inline) {\n            if (this.fulled) {\n              this.exit();\n            } else {\n              this.full();\n            }\n          } else {\n            this.hide();\n          }\n          break;\n        case 'hide':\n          if (!this.pointerMoved) {\n            this.hide();\n          }\n          break;\n        case 'view':\n          this.view(getData(target, 'index'));\n          break;\n        case 'zoom-in':\n          this.zoom(0.1, true);\n          break;\n        case 'zoom-out':\n          this.zoom(-0.1, true);\n          break;\n        case 'one-to-one':\n          this.toggle();\n          break;\n        case 'reset':\n          this.reset();\n          break;\n        case 'prev':\n          this.prev(options.loop);\n          break;\n        case 'play':\n          this.play(options.fullscreen);\n          break;\n        case 'next':\n          this.next(options.loop);\n          break;\n        case 'rotate-left':\n          this.rotate(-90);\n          break;\n        case 'rotate-right':\n          this.rotate(90);\n          break;\n        case 'flip-horizontal':\n          this.scaleX(-imageData.scaleX || -1);\n          break;\n        case 'flip-vertical':\n          this.scaleY(-imageData.scaleY || -1);\n          break;\n        default:\n          if (this.played) {\n            this.stop();\n          }\n      }\n    },\n    dblclick: function dblclick(event) {\n      event.preventDefault();\n      if (this.viewed && event.target === this.image) {\n        // Cancel the emulated double click when the native dblclick event was triggered.\n        if (IS_TOUCH_DEVICE && event.isTrusted) {\n          clearTimeout(this.doubleClickImageTimeout);\n        }\n\n        // XXX: No pageX/Y properties in custom event, fallback to the original event.\n        this.toggle(event.isTrusted ? event : event.detail && event.detail.originalEvent);\n      }\n    },\n    load: function load() {\n      var _this = this;\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n        this.timeout = false;\n      }\n      var element = this.element,\n        options = this.options,\n        image = this.image,\n        index = this.index,\n        viewerData = this.viewerData;\n      removeClass(image, CLASS_INVISIBLE);\n      if (options.loading) {\n        removeClass(this.canvas, CLASS_LOADING);\n      }\n      image.style.cssText = 'height:0;' + \"margin-left:\".concat(viewerData.width / 2, \"px;\") + \"margin-top:\".concat(viewerData.height / 2, \"px;\") + 'max-width:none!important;' + 'position:relative;' + 'width:0;';\n      this.initImage(function () {\n        toggleClass(image, CLASS_MOVE, options.movable);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n        _this.renderImage(function () {\n          _this.viewed = true;\n          _this.viewing = false;\n          if (isFunction(options.viewed)) {\n            addListener(element, EVENT_VIEWED, options.viewed, {\n              once: true\n            });\n          }\n          dispatchEvent(element, EVENT_VIEWED, {\n            originalImage: _this.images[index],\n            index: index,\n            image: image\n          }, {\n            cancelable: false\n          });\n        });\n      });\n    },\n    loadImage: function loadImage(event) {\n      var image = event.target;\n      var parent = image.parentNode;\n      var parentWidth = parent.offsetWidth || 30;\n      var parentHeight = parent.offsetHeight || 50;\n      var filled = !!getData(image, 'filled');\n      getImageNaturalSizes(image, this.options, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = parentWidth;\n        var height = parentHeight;\n        if (parentHeight * aspectRatio > parentWidth) {\n          if (filled) {\n            width = parentHeight * aspectRatio;\n          } else {\n            height = parentWidth / aspectRatio;\n          }\n        } else if (filled) {\n          height = parentWidth / aspectRatio;\n        } else {\n          width = parentHeight * aspectRatio;\n        }\n        setStyle(image, assign({\n          width: width,\n          height: height\n        }, getTransforms({\n          translateX: (parentWidth - width) / 2,\n          translateY: (parentHeight - height) / 2\n        })));\n      });\n    },\n    keydown: function keydown(event) {\n      var options = this.options;\n      if (!options.keyboard) {\n        return;\n      }\n      var keyCode = event.keyCode || event.which || event.charCode;\n      switch (keyCode) {\n        // Enter\n        case 13:\n          if (this.viewer.contains(event.target)) {\n            this.click(event);\n          }\n          break;\n      }\n      if (!this.fulled) {\n        return;\n      }\n      switch (keyCode) {\n        // Escape\n        case 27:\n          if (this.played) {\n            this.stop();\n          } else if (options.inline) {\n            if (this.fulled) {\n              this.exit();\n            }\n          } else {\n            this.hide();\n          }\n          break;\n\n        // Space\n        case 32:\n          if (this.played) {\n            this.stop();\n          }\n          break;\n\n        // ArrowLeft\n        case 37:\n          if (this.played && this.playing) {\n            this.playing.prev();\n          } else {\n            this.prev(options.loop);\n          }\n          break;\n\n        // ArrowUp\n        case 38:\n          // Prevent scroll on Firefox\n          event.preventDefault();\n\n          // Zoom in\n          this.zoom(options.zoomRatio, true);\n          break;\n\n        // ArrowRight\n        case 39:\n          if (this.played && this.playing) {\n            this.playing.next();\n          } else {\n            this.next(options.loop);\n          }\n          break;\n\n        // ArrowDown\n        case 40:\n          // Prevent scroll on Firefox\n          event.preventDefault();\n\n          // Zoom out\n          this.zoom(-options.zoomRatio, true);\n          break;\n\n        // Ctrl + 0\n        case 48:\n        // Fall through\n\n        // Ctrl + 1\n        // eslint-disable-next-line no-fallthrough\n        case 49:\n          if (event.ctrlKey) {\n            event.preventDefault();\n            this.toggle();\n          }\n          break;\n      }\n    },\n    dragstart: function dragstart(event) {\n      if (event.target.localName === 'img') {\n        event.preventDefault();\n      }\n    },\n    pointerdown: function pointerdown(event) {\n      var options = this.options,\n        pointers = this.pointers;\n      var buttons = event.buttons,\n        button = event.button;\n      this.pointerMoved = false;\n      if (!this.viewed || this.showing || this.viewing || this.hiding\n\n      // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && (\n      // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0\n\n      // Open context menu\n      || event.ctrlKey)) {\n        return;\n      }\n\n      // Prevent default behaviours as page zooming in touch devices.\n      event.preventDefault();\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n      var action = options.movable ? ACTION_MOVE : false;\n      if (options.zoomOnTouch && options.zoomable && Object.keys(pointers).length > 1) {\n        action = ACTION_ZOOM;\n      } else if (options.slideOnTouch && (event.pointerType === 'touch' || event.type === 'touchstart') && this.isSwitchable()) {\n        action = ACTION_SWITCH;\n      }\n      if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n        removeClass(this.image, CLASS_TRANSITION);\n      }\n      this.action = action;\n    },\n    pointermove: function pointermove(event) {\n      var pointers = this.pointers,\n        action = this.action;\n      if (!this.viewed || !action) {\n        return;\n      }\n      event.preventDefault();\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n      this.change(event);\n    },\n    pointerup: function pointerup(event) {\n      var _this2 = this;\n      var options = this.options,\n        action = this.action,\n        pointers = this.pointers;\n      var pointer;\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          pointer = pointers[touch.identifier];\n          delete pointers[touch.identifier];\n        });\n      } else {\n        pointer = pointers[event.pointerId || 0];\n        delete pointers[event.pointerId || 0];\n      }\n      if (!action) {\n        return;\n      }\n      event.preventDefault();\n      if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n        addClass(this.image, CLASS_TRANSITION);\n      }\n      this.action = false;\n\n      // Emulate click and double click in touch devices to support backdrop and image zooming (#210).\n      if (IS_TOUCH_DEVICE && action !== ACTION_ZOOM && pointer && Date.now() - pointer.timeStamp < 500) {\n        clearTimeout(this.clickCanvasTimeout);\n        clearTimeout(this.doubleClickImageTimeout);\n        if (options.toggleOnDblclick && this.viewed && event.target === this.image) {\n          if (this.imageClicked) {\n            this.imageClicked = false;\n\n            // This timeout will be cleared later when a native dblclick event is triggering\n            this.doubleClickImageTimeout = setTimeout(function () {\n              dispatchEvent(_this2.image, EVENT_DBLCLICK, {\n                originalEvent: event\n              });\n            }, 50);\n          } else {\n            this.imageClicked = true;\n\n            // The default timing of a double click in Windows is 500 ms\n            this.doubleClickImageTimeout = setTimeout(function () {\n              _this2.imageClicked = false;\n            }, 500);\n          }\n        } else {\n          this.imageClicked = false;\n          if (options.backdrop && options.backdrop !== 'static' && event.target === this.canvas) {\n            // This timeout will be cleared later when a native click event is triggering\n            this.clickCanvasTimeout = setTimeout(function () {\n              dispatchEvent(_this2.canvas, EVENT_CLICK, {\n                originalEvent: event\n              });\n            }, 50);\n          }\n        }\n      }\n    },\n    resize: function resize() {\n      var _this3 = this;\n      if (!this.isShown || this.hiding) {\n        return;\n      }\n      if (this.fulled) {\n        this.close();\n        this.initBody();\n        this.open();\n      }\n      this.initContainer();\n      this.initViewer();\n      this.renderViewer();\n      this.renderList();\n      if (this.viewed) {\n        this.initImage(function () {\n          _this3.renderImage();\n        });\n      }\n      if (this.played) {\n        if (this.options.fullscreen && this.fulled && !(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n          this.stop();\n          return;\n        }\n        forEach(this.player.getElementsByTagName('img'), function (image) {\n          addListener(image, EVENT_LOAD, _this3.loadImage.bind(_this3), {\n            once: true\n          });\n          dispatchEvent(image, EVENT_LOAD);\n        });\n      }\n    },\n    wheel: function wheel(event) {\n      var _this4 = this;\n      if (!this.viewed) {\n        return;\n      }\n      event.preventDefault();\n\n      // Limit wheel speed to prevent zoom too fast\n      if (this.wheeling) {\n        return;\n      }\n      this.wheeling = true;\n      setTimeout(function () {\n        _this4.wheeling = false;\n      }, 50);\n      var ratio = Number(this.options.zoomRatio) || 0.1;\n      var delta = 1;\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n      this.zoom(-delta * ratio, true, null, event);\n    }\n  };\n\n  var methods = {\n    /** Show the viewer (only available in modal mode)\n     * @param {boolean} [immediate=false] - Indicates if show the viewer immediately or not.\n     * @returns {Viewer} this\n     */\n    show: function show() {\n      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var element = this.element,\n        options = this.options;\n      if (options.inline || this.showing || this.isShown || this.showing) {\n        return this;\n      }\n      if (!this.ready) {\n        this.build();\n        if (this.ready) {\n          this.show(immediate);\n        }\n        return this;\n      }\n      if (isFunction(options.show)) {\n        addListener(element, EVENT_SHOW, options.show, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_SHOW) === false || !this.ready) {\n        return this;\n      }\n      if (this.hiding) {\n        this.transitioning.abort();\n      }\n      this.showing = true;\n      this.open();\n      var viewer = this.viewer;\n      removeClass(viewer, CLASS_HIDE);\n      viewer.setAttribute('role', 'dialog');\n      viewer.setAttribute('aria-labelledby', this.title.id);\n      viewer.setAttribute('aria-modal', true);\n      viewer.removeAttribute('aria-hidden');\n      if (options.transition && !immediate) {\n        var shown = this.shown.bind(this);\n        this.transitioning = {\n          abort: function abort() {\n            removeListener(viewer, EVENT_TRANSITION_END, shown);\n            removeClass(viewer, CLASS_IN);\n          }\n        };\n        addClass(viewer, CLASS_TRANSITION);\n\n        // Force reflow to enable CSS3 transition\n        viewer.initialOffsetWidth = viewer.offsetWidth;\n        addListener(viewer, EVENT_TRANSITION_END, shown, {\n          once: true\n        });\n        addClass(viewer, CLASS_IN);\n      } else {\n        addClass(viewer, CLASS_IN);\n        this.shown();\n      }\n      return this;\n    },\n    /**\n     * Hide the viewer (only available in modal mode)\n     * @param {boolean} [immediate=false] - Indicates if hide the viewer immediately or not.\n     * @returns {Viewer} this\n     */\n    hide: function hide() {\n      var _this = this;\n      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var element = this.element,\n        options = this.options;\n      if (options.inline || this.hiding || !(this.isShown || this.showing)) {\n        return this;\n      }\n      if (isFunction(options.hide)) {\n        addListener(element, EVENT_HIDE, options.hide, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_HIDE) === false) {\n        return this;\n      }\n      if (this.showing) {\n        this.transitioning.abort();\n      }\n      this.hiding = true;\n      if (this.played) {\n        this.stop();\n      } else if (this.viewing) {\n        this.viewing.abort();\n      }\n      var viewer = this.viewer,\n        image = this.image;\n      var hideImmediately = function hideImmediately() {\n        removeClass(viewer, CLASS_IN);\n        _this.hidden();\n      };\n      if (options.transition && !immediate) {\n        var onViewerTransitionEnd = function onViewerTransitionEnd(event) {\n          // Ignore all propagating `transitionend` events (#275).\n          if (event && event.target === viewer) {\n            removeListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n            _this.hidden();\n          }\n        };\n        var onImageTransitionEnd = function onImageTransitionEnd() {\n          // In case of show the viewer by `viewer.show(true)` previously (#407).\n          if (hasClass(viewer, CLASS_TRANSITION)) {\n            addListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n            removeClass(viewer, CLASS_IN);\n          } else {\n            hideImmediately();\n          }\n        };\n        this.transitioning = {\n          abort: function abort() {\n            if (_this.viewed && hasClass(image, CLASS_TRANSITION)) {\n              removeListener(image, EVENT_TRANSITION_END, onImageTransitionEnd);\n            } else if (hasClass(viewer, CLASS_TRANSITION)) {\n              removeListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n            }\n          }\n        };\n\n        // In case of hiding the viewer when holding on the image (#255),\n        // note that the `CLASS_TRANSITION` class will be removed on pointer down.\n        if (this.viewed && hasClass(image, CLASS_TRANSITION)) {\n          addListener(image, EVENT_TRANSITION_END, onImageTransitionEnd, {\n            once: true\n          });\n          this.zoomTo(0, false, null, null, true);\n        } else {\n          onImageTransitionEnd();\n        }\n      } else {\n        hideImmediately();\n      }\n      return this;\n    },\n    /**\n     * View one of the images with image's index\n     * @param {number} index - The index of the image to view.\n     * @returns {Viewer} this\n     */\n    view: function view() {\n      var _this2 = this;\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options.initialViewIndex;\n      index = Number(index) || 0;\n      if (this.hiding || this.played || index < 0 || index >= this.length || this.viewed && index === this.index) {\n        return this;\n      }\n      if (!this.isShown) {\n        this.index = index;\n        return this.show();\n      }\n      if (this.viewing) {\n        this.viewing.abort();\n      }\n      var element = this.element,\n        options = this.options,\n        title = this.title,\n        canvas = this.canvas;\n      var item = this.items[index];\n      var img = item.querySelector('img');\n      var url = getData(img, 'originalUrl');\n      var alt = img.getAttribute('alt');\n      var image = document.createElement('img');\n      forEach(options.inheritedAttributes, function (name) {\n        var value = img.getAttribute(name);\n        if (value !== null) {\n          image.setAttribute(name, value);\n        }\n      });\n      image.src = url;\n      image.alt = alt;\n      if (isFunction(options.view)) {\n        addListener(element, EVENT_VIEW, options.view, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_VIEW, {\n        originalImage: this.images[index],\n        index: index,\n        image: image\n      }) === false || !this.isShown || this.hiding || this.played) {\n        return this;\n      }\n      var activeItem = this.items[this.index];\n      if (activeItem) {\n        removeClass(activeItem, CLASS_ACTIVE);\n        activeItem.removeAttribute('aria-selected');\n      }\n      addClass(item, CLASS_ACTIVE);\n      item.setAttribute('aria-selected', true);\n      if (options.focus) {\n        item.focus();\n      }\n      this.image = image;\n      this.viewed = false;\n      this.index = index;\n      this.imageData = {};\n      addClass(image, CLASS_INVISIBLE);\n      if (options.loading) {\n        addClass(canvas, CLASS_LOADING);\n      }\n      canvas.innerHTML = '';\n      canvas.appendChild(image);\n\n      // Center current item\n      this.renderList();\n\n      // Clear title\n      title.innerHTML = '';\n\n      // Generate title after viewed\n      var onViewed = function onViewed() {\n        var imageData = _this2.imageData;\n        var render = Array.isArray(options.title) ? options.title[1] : options.title;\n        title.innerHTML = escapeHTMLEntities(isFunction(render) ? render.call(_this2, image, imageData) : \"\".concat(alt, \" (\").concat(imageData.naturalWidth, \" \\xD7 \").concat(imageData.naturalHeight, \")\"));\n      };\n      var onLoad;\n      var onError;\n      addListener(element, EVENT_VIEWED, onViewed, {\n        once: true\n      });\n      this.viewing = {\n        abort: function abort() {\n          removeListener(element, EVENT_VIEWED, onViewed);\n          if (image.complete) {\n            if (_this2.imageRendering) {\n              _this2.imageRendering.abort();\n            } else if (_this2.imageInitializing) {\n              _this2.imageInitializing.abort();\n            }\n          } else {\n            // Cancel download to save bandwidth.\n            image.src = '';\n            removeListener(image, EVENT_LOAD, onLoad);\n            if (_this2.timeout) {\n              clearTimeout(_this2.timeout);\n            }\n          }\n        }\n      };\n      if (image.complete) {\n        this.load();\n      } else {\n        addListener(image, EVENT_LOAD, onLoad = function onLoad() {\n          removeListener(image, EVENT_ERROR, onError);\n          _this2.load();\n        }, {\n          once: true\n        });\n        addListener(image, EVENT_ERROR, onError = function onError() {\n          removeListener(image, EVENT_LOAD, onLoad);\n          if (_this2.timeout) {\n            clearTimeout(_this2.timeout);\n            _this2.timeout = false;\n          }\n          removeClass(image, CLASS_INVISIBLE);\n          if (options.loading) {\n            removeClass(_this2.canvas, CLASS_LOADING);\n          }\n        }, {\n          once: true\n        });\n        if (this.timeout) {\n          clearTimeout(this.timeout);\n        }\n\n        // Make the image visible if it fails to load within 1s\n        this.timeout = setTimeout(function () {\n          removeClass(image, CLASS_INVISIBLE);\n          _this2.timeout = false;\n        }, 1000);\n      }\n      return this;\n    },\n    /**\n     * View the previous image\n     * @param {boolean} [loop=false] - Indicate if view the last one\n     * when it is the first one at present.\n     * @returns {Viewer} this\n     */\n    prev: function prev() {\n      var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var index = this.index - 1;\n      if (index < 0) {\n        index = loop ? this.length - 1 : 0;\n      }\n      this.view(index);\n      return this;\n    },\n    /**\n     * View the next image\n     * @param {boolean} [loop=false] - Indicate if view the first one\n     * when it is the last one at present.\n     * @returns {Viewer} this\n     */\n    next: function next() {\n      var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var maxIndex = this.length - 1;\n      var index = this.index + 1;\n      if (index > maxIndex) {\n        index = loop ? 0 : maxIndex;\n      }\n      this.view(index);\n      return this;\n    },\n    /**\n     * Move the image with relative offsets.\n     * @param {number} x - The moving distance in the horizontal direction.\n     * @param {number} [y=x] The moving distance in the vertical direction.\n     * @returns {Viewer} this\n     */\n    move: function move(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var imageData = this.imageData;\n      this.moveTo(isUndefined(x) ? x : imageData.x + Number(x), isUndefined(y) ? y : imageData.y + Number(y));\n      return this;\n    },\n    /**\n     * Move the image to an absolute point.\n     * @param {number} x - The new position in the horizontal direction.\n     * @param {number} [y=x] - The new position in the vertical direction.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    moveTo: function moveTo(x) {\n      var _this3 = this;\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var element = this.element,\n        options = this.options,\n        imageData = this.imageData;\n      x = Number(x);\n      y = Number(y);\n      if (this.viewed && !this.played && options.movable) {\n        var oldX = imageData.x;\n        var oldY = imageData.y;\n        var changed = false;\n        if (isNumber(x)) {\n          changed = true;\n        } else {\n          x = oldX;\n        }\n        if (isNumber(y)) {\n          changed = true;\n        } else {\n          y = oldY;\n        }\n        if (changed) {\n          if (isFunction(options.move)) {\n            addListener(element, EVENT_MOVE, options.move, {\n              once: true\n            });\n          }\n          if (dispatchEvent(element, EVENT_MOVE, {\n            x: x,\n            y: y,\n            oldX: oldX,\n            oldY: oldY,\n            originalEvent: _originalEvent\n          }) === false) {\n            return this;\n          }\n          imageData.x = x;\n          imageData.y = y;\n          imageData.left = x;\n          imageData.top = y;\n          this.moving = true;\n          this.renderImage(function () {\n            _this3.moving = false;\n            if (isFunction(options.moved)) {\n              addListener(element, EVENT_MOVED, options.moved, {\n                once: true\n              });\n            }\n            dispatchEvent(element, EVENT_MOVED, {\n              x: x,\n              y: y,\n              oldX: oldX,\n              oldY: oldY,\n              originalEvent: _originalEvent\n            }, {\n              cancelable: false\n            });\n          });\n        }\n      }\n      return this;\n    },\n    /**\n     * Rotate the image with a relative degree.\n     * @param {number} degree - The rotate degree.\n     * @returns {Viewer} this\n     */\n    rotate: function rotate(degree) {\n      this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n      return this;\n    },\n    /**\n     * Rotate the image to an absolute degree.\n     * @param {number} degree - The rotate degree.\n     * @returns {Viewer} this\n     */\n    rotateTo: function rotateTo(degree) {\n      var _this4 = this;\n      var element = this.element,\n        options = this.options,\n        imageData = this.imageData;\n      degree = Number(degree);\n      if (isNumber(degree) && this.viewed && !this.played && options.rotatable) {\n        var oldDegree = imageData.rotate;\n        if (isFunction(options.rotate)) {\n          addListener(element, EVENT_ROTATE, options.rotate, {\n            once: true\n          });\n        }\n        if (dispatchEvent(element, EVENT_ROTATE, {\n          degree: degree,\n          oldDegree: oldDegree\n        }) === false) {\n          return this;\n        }\n        imageData.rotate = degree;\n        this.rotating = true;\n        this.renderImage(function () {\n          _this4.rotating = false;\n          if (isFunction(options.rotated)) {\n            addListener(element, EVENT_ROTATED, options.rotated, {\n              once: true\n            });\n          }\n          dispatchEvent(element, EVENT_ROTATED, {\n            degree: degree,\n            oldDegree: oldDegree\n          }, {\n            cancelable: false\n          });\n        });\n      }\n      return this;\n    },\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Viewer} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      this.scale(_scaleX, this.imageData.scaleY);\n      return this;\n    },\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Viewer} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      this.scale(this.imageData.scaleX, _scaleY);\n      return this;\n    },\n    /**\n     * Scale the image.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Viewer} this\n     */\n    scale: function scale(scaleX) {\n      var _this5 = this;\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var element = this.element,\n        options = this.options,\n        imageData = this.imageData;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n      if (this.viewed && !this.played && options.scalable) {\n        var oldScaleX = imageData.scaleX;\n        var oldScaleY = imageData.scaleY;\n        var changed = false;\n        if (isNumber(scaleX)) {\n          changed = true;\n        } else {\n          scaleX = oldScaleX;\n        }\n        if (isNumber(scaleY)) {\n          changed = true;\n        } else {\n          scaleY = oldScaleY;\n        }\n        if (changed) {\n          if (isFunction(options.scale)) {\n            addListener(element, EVENT_SCALE, options.scale, {\n              once: true\n            });\n          }\n          if (dispatchEvent(element, EVENT_SCALE, {\n            scaleX: scaleX,\n            scaleY: scaleY,\n            oldScaleX: oldScaleX,\n            oldScaleY: oldScaleY\n          }) === false) {\n            return this;\n          }\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n          this.scaling = true;\n          this.renderImage(function () {\n            _this5.scaling = false;\n            if (isFunction(options.scaled)) {\n              addListener(element, EVENT_SCALED, options.scaled, {\n                once: true\n              });\n            }\n            dispatchEvent(element, EVENT_SCALED, {\n              scaleX: scaleX,\n              scaleY: scaleY,\n              oldScaleX: oldScaleX,\n              oldScaleY: oldScaleY\n            }, {\n              cancelable: false\n            });\n          });\n        }\n      }\n      return this;\n    },\n    /**\n     * Zoom the image with a relative ratio.\n     * @param {number} ratio - The target ratio.\n     * @param {boolean} [showTooltip=false] - Indicates whether to show the tooltip.\n     * @param {Object} [pivot] - The pivot point coordinate for zooming.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    zoom: function zoom(ratio) {\n      var showTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var pivot = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var _originalEvent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      var imageData = this.imageData;\n      ratio = Number(ratio);\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n      this.zoomTo(imageData.width * ratio / imageData.naturalWidth, showTooltip, pivot, _originalEvent);\n      return this;\n    },\n    /**\n     * Zoom the image to an absolute ratio.\n     * @param {number} ratio - The target ratio.\n     * @param {boolean} [showTooltip] - Indicates whether to show the tooltip.\n     * @param {Object} [pivot] - The pivot point coordinate for zooming.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @param {Event} [_zoomable=false] - Indicates if the current zoom is available or not.\n     * @returns {Viewer} this\n     */\n    zoomTo: function zoomTo(ratio) {\n      var _this6 = this;\n      var showTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var pivot = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var _originalEvent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      var _zoomable = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n      var element = this.element,\n        options = this.options,\n        pointers = this.pointers,\n        imageData = this.imageData;\n      var x = imageData.x,\n        y = imageData.y,\n        width = imageData.width,\n        height = imageData.height,\n        naturalWidth = imageData.naturalWidth,\n        naturalHeight = imageData.naturalHeight;\n      ratio = Math.max(0, ratio);\n      if (isNumber(ratio) && this.viewed && !this.played && (_zoomable || options.zoomable)) {\n        if (!_zoomable) {\n          var minZoomRatio = Math.max(0.01, options.minZoomRatio);\n          var maxZoomRatio = Math.min(100, options.maxZoomRatio);\n          ratio = Math.min(Math.max(ratio, minZoomRatio), maxZoomRatio);\n        }\n        if (_originalEvent) {\n          switch (_originalEvent.type) {\n            case 'wheel':\n              if (options.zoomRatio >= 0.055 && ratio > 0.95 && ratio < 1.05) {\n                ratio = 1;\n              }\n              break;\n            case 'pointermove':\n            case 'touchmove':\n            case 'mousemove':\n              if (ratio > 0.99 && ratio < 1.01) {\n                ratio = 1;\n              }\n              break;\n          }\n        }\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n        var offsetWidth = newWidth - width;\n        var offsetHeight = newHeight - height;\n        var oldRatio = imageData.ratio;\n        if (isFunction(options.zoom)) {\n          addListener(element, EVENT_ZOOM, options.zoom, {\n            once: true\n          });\n        }\n        if (dispatchEvent(element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: oldRatio,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n        this.zooming = true;\n        if (_originalEvent) {\n          var offset = getOffset(this.viewer);\n          var center = pointers && Object.keys(pointers).length > 0 ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          };\n\n          // Zoom from the triggering point of the event\n          imageData.x -= offsetWidth * ((center.pageX - offset.left - x) / width);\n          imageData.y -= offsetHeight * ((center.pageY - offset.top - y) / height);\n        } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n          imageData.x -= offsetWidth * ((pivot.x - x) / width);\n          imageData.y -= offsetHeight * ((pivot.y - y) / height);\n        } else {\n          // Zoom from the center of the image\n          imageData.x -= offsetWidth / 2;\n          imageData.y -= offsetHeight / 2;\n        }\n        imageData.left = imageData.x;\n        imageData.top = imageData.y;\n        imageData.width = newWidth;\n        imageData.height = newHeight;\n        imageData.oldRatio = oldRatio;\n        imageData.ratio = ratio;\n        this.renderImage(function () {\n          _this6.zooming = false;\n          if (isFunction(options.zoomed)) {\n            addListener(element, EVENT_ZOOMED, options.zoomed, {\n              once: true\n            });\n          }\n          dispatchEvent(element, EVENT_ZOOMED, {\n            ratio: ratio,\n            oldRatio: oldRatio,\n            originalEvent: _originalEvent\n          }, {\n            cancelable: false\n          });\n        });\n        if (showTooltip) {\n          this.tooltip();\n        }\n      }\n      return this;\n    },\n    /**\n     * Play the images\n     * @param {boolean|FullscreenOptions} [fullscreen=false] - Indicate if request fullscreen or not.\n     * @returns {Viewer} this\n     */\n    play: function play() {\n      var _this7 = this;\n      var fullscreen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!this.isShown || this.played) {\n        return this;\n      }\n      var element = this.element,\n        options = this.options;\n      if (isFunction(options.play)) {\n        addListener(element, EVENT_PLAY, options.play, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_PLAY) === false) {\n        return this;\n      }\n      var player = this.player;\n      var onLoad = this.loadImage.bind(this);\n      var list = [];\n      var total = 0;\n      var index = 0;\n      this.played = true;\n      this.onLoadWhenPlay = onLoad;\n      if (fullscreen) {\n        this.requestFullscreen(fullscreen);\n      }\n      addClass(player, CLASS_SHOW);\n      forEach(this.items, function (item, i) {\n        var img = item.querySelector('img');\n        var image = document.createElement('img');\n        image.src = getData(img, 'originalUrl');\n        image.alt = img.getAttribute('alt');\n        image.referrerPolicy = img.referrerPolicy;\n        total += 1;\n        addClass(image, CLASS_FADE);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n        if (hasClass(item, CLASS_ACTIVE)) {\n          addClass(image, CLASS_IN);\n          index = i;\n        }\n        list.push(image);\n        addListener(image, EVENT_LOAD, onLoad, {\n          once: true\n        });\n        player.appendChild(image);\n      });\n      if (isNumber(options.interval) && options.interval > 0) {\n        var prev = function prev() {\n          clearTimeout(_this7.playing.timeout);\n          removeClass(list[index], CLASS_IN);\n          index -= 1;\n          index = index >= 0 ? index : total - 1;\n          addClass(list[index], CLASS_IN);\n          _this7.playing.timeout = setTimeout(prev, options.interval);\n        };\n        var next = function next() {\n          clearTimeout(_this7.playing.timeout);\n          removeClass(list[index], CLASS_IN);\n          index += 1;\n          index = index < total ? index : 0;\n          addClass(list[index], CLASS_IN);\n          _this7.playing.timeout = setTimeout(next, options.interval);\n        };\n        if (total > 1) {\n          this.playing = {\n            prev: prev,\n            next: next,\n            timeout: setTimeout(next, options.interval)\n          };\n        }\n      }\n      return this;\n    },\n    // Stop play\n    stop: function stop() {\n      var _this8 = this;\n      if (!this.played) {\n        return this;\n      }\n      var element = this.element,\n        options = this.options;\n      if (isFunction(options.stop)) {\n        addListener(element, EVENT_STOP, options.stop, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_STOP) === false) {\n        return this;\n      }\n      var player = this.player;\n      clearTimeout(this.playing.timeout);\n      this.playing = false;\n      this.played = false;\n      forEach(player.getElementsByTagName('img'), function (image) {\n        removeListener(image, EVENT_LOAD, _this8.onLoadWhenPlay);\n      });\n      removeClass(player, CLASS_SHOW);\n      player.innerHTML = '';\n      this.exitFullscreen();\n      return this;\n    },\n    // Enter modal mode (only available in inline mode)\n    full: function full() {\n      var _this9 = this;\n      var options = this.options,\n        viewer = this.viewer,\n        image = this.image,\n        list = this.list;\n      if (!this.isShown || this.played || this.fulled || !options.inline) {\n        return this;\n      }\n      this.fulled = true;\n      this.open();\n      addClass(this.button, CLASS_FULLSCREEN_EXIT);\n      if (options.transition) {\n        removeClass(list, CLASS_TRANSITION);\n        if (this.viewed) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n      }\n      addClass(viewer, CLASS_FIXED);\n      viewer.setAttribute('role', 'dialog');\n      viewer.setAttribute('aria-labelledby', this.title.id);\n      viewer.setAttribute('aria-modal', true);\n      viewer.removeAttribute('style');\n      setStyle(viewer, {\n        zIndex: options.zIndex\n      });\n      if (options.focus) {\n        this.enforceFocus();\n      }\n      this.initContainer();\n      this.viewerData = assign({}, this.containerData);\n      this.renderList();\n      if (this.viewed) {\n        this.initImage(function () {\n          _this9.renderImage(function () {\n            if (options.transition) {\n              setTimeout(function () {\n                addClass(image, CLASS_TRANSITION);\n                addClass(list, CLASS_TRANSITION);\n              }, 0);\n            }\n          });\n        });\n      }\n      return this;\n    },\n    // Exit modal mode (only available in inline mode)\n    exit: function exit() {\n      var _this10 = this;\n      var options = this.options,\n        viewer = this.viewer,\n        image = this.image,\n        list = this.list;\n      if (!this.isShown || this.played || !this.fulled || !options.inline) {\n        return this;\n      }\n      this.fulled = false;\n      this.close();\n      removeClass(this.button, CLASS_FULLSCREEN_EXIT);\n      if (options.transition) {\n        removeClass(list, CLASS_TRANSITION);\n        if (this.viewed) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n      }\n      if (options.focus) {\n        this.clearEnforceFocus();\n      }\n      viewer.removeAttribute('role');\n      viewer.removeAttribute('aria-labelledby');\n      viewer.removeAttribute('aria-modal');\n      removeClass(viewer, CLASS_FIXED);\n      setStyle(viewer, {\n        zIndex: options.zIndexInline\n      });\n      this.viewerData = assign({}, this.parentData);\n      this.renderViewer();\n      this.renderList();\n      if (this.viewed) {\n        this.initImage(function () {\n          _this10.renderImage(function () {\n            if (options.transition) {\n              setTimeout(function () {\n                addClass(image, CLASS_TRANSITION);\n                addClass(list, CLASS_TRANSITION);\n              }, 0);\n            }\n          });\n        });\n      }\n      return this;\n    },\n    // Show the current ratio of the image with percentage\n    tooltip: function tooltip() {\n      var _this11 = this;\n      var options = this.options,\n        tooltipBox = this.tooltipBox,\n        imageData = this.imageData;\n      if (!this.viewed || this.played || !options.tooltip) {\n        return this;\n      }\n      tooltipBox.textContent = \"\".concat(Math.round(imageData.ratio * 100), \"%\");\n      if (!this.tooltipping) {\n        if (options.transition) {\n          if (this.fading) {\n            dispatchEvent(tooltipBox, EVENT_TRANSITION_END);\n          }\n          addClass(tooltipBox, CLASS_SHOW);\n          addClass(tooltipBox, CLASS_FADE);\n          addClass(tooltipBox, CLASS_TRANSITION);\n          tooltipBox.removeAttribute('aria-hidden');\n\n          // Force reflow to enable CSS3 transition\n          tooltipBox.initialOffsetWidth = tooltipBox.offsetWidth;\n          addClass(tooltipBox, CLASS_IN);\n        } else {\n          addClass(tooltipBox, CLASS_SHOW);\n          tooltipBox.removeAttribute('aria-hidden');\n        }\n      } else {\n        clearTimeout(this.tooltipping);\n      }\n      this.tooltipping = setTimeout(function () {\n        if (options.transition) {\n          addListener(tooltipBox, EVENT_TRANSITION_END, function () {\n            removeClass(tooltipBox, CLASS_SHOW);\n            removeClass(tooltipBox, CLASS_FADE);\n            removeClass(tooltipBox, CLASS_TRANSITION);\n            tooltipBox.setAttribute('aria-hidden', true);\n            _this11.fading = false;\n          }, {\n            once: true\n          });\n          removeClass(tooltipBox, CLASS_IN);\n          _this11.fading = true;\n        } else {\n          removeClass(tooltipBox, CLASS_SHOW);\n          tooltipBox.setAttribute('aria-hidden', true);\n        }\n        _this11.tooltipping = false;\n      }, 1000);\n      return this;\n    },\n    /**\n     * Toggle the image size between its current size and natural size\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    toggle: function toggle() {\n      var _originalEvent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      if (this.imageData.ratio === 1) {\n        this.zoomTo(this.imageData.oldRatio, true, null, _originalEvent);\n      } else {\n        this.zoomTo(1, true, null, _originalEvent);\n      }\n      return this;\n    },\n    // Reset the image to its initial state\n    reset: function reset() {\n      if (this.viewed && !this.played) {\n        this.imageData = assign({}, this.initialImageData);\n        this.renderImage();\n      }\n      return this;\n    },\n    // Update viewer when images changed\n    update: function update() {\n      var _this12 = this;\n      var element = this.element,\n        options = this.options,\n        isImg = this.isImg;\n\n      // Destroy viewer if the target image was deleted\n      if (isImg && !element.parentNode) {\n        return this.destroy();\n      }\n      var images = [];\n      forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n        if (isFunction(options.filter)) {\n          if (options.filter.call(_this12, image)) {\n            images.push(image);\n          }\n        } else if (_this12.getImageURL(image)) {\n          images.push(image);\n        }\n      });\n      if (!images.length) {\n        return this;\n      }\n      this.images = images;\n      this.length = images.length;\n      if (this.ready) {\n        var changedIndexes = [];\n        forEach(this.items, function (item, i) {\n          var img = item.querySelector('img');\n          var image = images[i];\n          if (image && img) {\n            if (image.src !== img.src\n\n            // Title changed (#408)\n            || image.alt !== img.alt) {\n              changedIndexes.push(i);\n            }\n          } else {\n            changedIndexes.push(i);\n          }\n        });\n        setStyle(this.list, {\n          width: 'auto'\n        });\n        this.initList();\n        if (this.isShown) {\n          if (this.length) {\n            if (this.viewed) {\n              var changedIndex = changedIndexes.indexOf(this.index);\n              if (changedIndex >= 0) {\n                this.viewed = false;\n                this.view(Math.max(Math.min(this.index - changedIndex, this.length - 1), 0));\n              } else {\n                var activeItem = this.items[this.index];\n\n                // Reactivate the current viewing item after reset the list.\n                addClass(activeItem, CLASS_ACTIVE);\n                activeItem.setAttribute('aria-selected', true);\n              }\n            }\n          } else {\n            this.image = null;\n            this.viewed = false;\n            this.index = 0;\n            this.imageData = {};\n            this.canvas.innerHTML = '';\n            this.title.innerHTML = '';\n          }\n        }\n      } else {\n        this.build();\n      }\n      return this;\n    },\n    // Destroy the viewer\n    destroy: function destroy() {\n      var element = this.element,\n        options = this.options;\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n      this.destroyed = true;\n      if (this.ready) {\n        if (this.played) {\n          this.stop();\n        }\n        if (options.inline) {\n          if (this.fulled) {\n            this.exit();\n          }\n          this.unbind();\n        } else if (this.isShown) {\n          if (this.viewing) {\n            if (this.imageRendering) {\n              this.imageRendering.abort();\n            } else if (this.imageInitializing) {\n              this.imageInitializing.abort();\n            }\n          }\n          if (this.hiding) {\n            this.transitioning.abort();\n          }\n          this.hidden();\n        } else if (this.showing) {\n          this.transitioning.abort();\n          this.hidden();\n        }\n        this.ready = false;\n        this.viewer.parentNode.removeChild(this.viewer);\n      } else if (options.inline) {\n        if (this.delaying) {\n          this.delaying.abort();\n        } else if (this.initializing) {\n          this.initializing.abort();\n        }\n      }\n      if (!options.inline) {\n        removeListener(element, EVENT_CLICK, this.onStart);\n      }\n      element[NAMESPACE] = undefined;\n      return this;\n    }\n  };\n\n  var others = {\n    getImageURL: function getImageURL(image) {\n      var url = this.options.url;\n      if (isString(url)) {\n        url = image.getAttribute(url);\n      } else if (isFunction(url)) {\n        url = url.call(this, image);\n      } else {\n        url = '';\n      }\n      return url;\n    },\n    enforceFocus: function enforceFocus() {\n      var _this = this;\n      this.clearEnforceFocus();\n      addListener(document, EVENT_FOCUSIN, this.onFocusin = function (event) {\n        var viewer = _this.viewer;\n        var target = event.target;\n        if (target === document || target === viewer || viewer.contains(target)) {\n          return;\n        }\n        while (target) {\n          // Avoid conflicts with other modals (#474, #540)\n          if (target.getAttribute('tabindex') !== null || target.getAttribute('aria-modal') === 'true') {\n            return;\n          }\n          target = target.parentElement;\n        }\n        viewer.focus();\n      });\n    },\n    clearEnforceFocus: function clearEnforceFocus() {\n      if (this.onFocusin) {\n        removeListener(document, EVENT_FOCUSIN, this.onFocusin);\n        this.onFocusin = null;\n      }\n    },\n    open: function open() {\n      var body = this.body;\n      addClass(body, CLASS_OPEN);\n      if (this.scrollbarWidth > 0) {\n        body.style.paddingRight = \"\".concat(this.scrollbarWidth + (parseFloat(this.initialBodyComputedPaddingRight) || 0), \"px\");\n      }\n    },\n    close: function close() {\n      var body = this.body;\n      removeClass(body, CLASS_OPEN);\n      if (this.scrollbarWidth > 0) {\n        body.style.paddingRight = this.initialBodyPaddingRight;\n      }\n    },\n    shown: function shown() {\n      var element = this.element,\n        options = this.options,\n        viewer = this.viewer;\n      this.fulled = true;\n      this.isShown = true;\n      this.render();\n      this.bind();\n      this.showing = false;\n      if (options.focus) {\n        viewer.focus();\n        this.enforceFocus();\n      }\n      if (isFunction(options.shown)) {\n        addListener(element, EVENT_SHOWN, options.shown, {\n          once: true\n        });\n      }\n      if (dispatchEvent(element, EVENT_SHOWN) === false) {\n        return;\n      }\n      if (this.ready && this.isShown && !this.hiding) {\n        this.view(this.index);\n      }\n    },\n    hidden: function hidden() {\n      var element = this.element,\n        options = this.options,\n        viewer = this.viewer;\n      if (options.fucus) {\n        this.clearEnforceFocus();\n      }\n      this.close();\n      this.unbind();\n      addClass(viewer, CLASS_HIDE);\n      viewer.removeAttribute('role');\n      viewer.removeAttribute('aria-labelledby');\n      viewer.removeAttribute('aria-modal');\n      viewer.setAttribute('aria-hidden', true);\n      this.resetList();\n      this.resetImage();\n      this.fulled = false;\n      this.viewed = false;\n      this.isShown = false;\n      this.hiding = false;\n      if (!this.destroyed) {\n        if (isFunction(options.hidden)) {\n          addListener(element, EVENT_HIDDEN, options.hidden, {\n            once: true\n          });\n        }\n        dispatchEvent(element, EVENT_HIDDEN, null, {\n          cancelable: false\n        });\n      }\n    },\n    requestFullscreen: function requestFullscreen(options) {\n      var document = this.element.ownerDocument;\n      if (this.fulled && !(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n        var documentElement = document.documentElement;\n\n        // Element.requestFullscreen()\n        if (documentElement.requestFullscreen) {\n          // Avoid TypeError when convert `options` to dictionary\n          if (isPlainObject(options)) {\n            documentElement.requestFullscreen(options);\n          } else {\n            documentElement.requestFullscreen();\n          }\n        } else if (documentElement.webkitRequestFullscreen) {\n          documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        } else if (documentElement.mozRequestFullScreen) {\n          documentElement.mozRequestFullScreen();\n        } else if (documentElement.msRequestFullscreen) {\n          documentElement.msRequestFullscreen();\n        }\n      }\n    },\n    exitFullscreen: function exitFullscreen() {\n      var document = this.element.ownerDocument;\n      if (this.fulled && (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n        // Document.exitFullscreen()\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        } else if (document.webkitExitFullscreen) {\n          document.webkitExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n          document.mozCancelFullScreen();\n        } else if (document.msExitFullscreen) {\n          document.msExitFullscreen();\n        }\n      }\n    },\n    change: function change(event) {\n      var options = this.options,\n        pointers = this.pointers;\n      var pointer = pointers[Object.keys(pointers)[0]];\n\n      // In the case of the `pointers` object is empty (#421)\n      if (!pointer) {\n        return;\n      }\n      var offsetX = pointer.endX - pointer.startX;\n      var offsetY = pointer.endY - pointer.startY;\n      switch (this.action) {\n        // Move the current image\n        case ACTION_MOVE:\n          if (offsetX !== 0 || offsetY !== 0) {\n            this.pointerMoved = true;\n            this.move(offsetX, offsetY, event);\n          }\n          break;\n\n        // Zoom the current image\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), false, null, event);\n          break;\n        case ACTION_SWITCH:\n          {\n            this.action = 'switched';\n            var absoluteOffsetX = Math.abs(offsetX);\n            if (absoluteOffsetX > 1 && absoluteOffsetX > Math.abs(offsetY)) {\n              // Empty `pointers` as `touchend` event will not be fired after swiped in iOS browsers.\n              this.pointers = {};\n              if (offsetX > 1) {\n                this.prev(options.loop);\n              } else if (offsetX < -1) {\n                this.next(options.loop);\n              }\n            }\n            break;\n          }\n      }\n\n      // Override\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    },\n    isSwitchable: function isSwitchable() {\n      var imageData = this.imageData,\n        viewerData = this.viewerData;\n      return this.length > 1 && imageData.x >= 0 && imageData.y >= 0 && imageData.width <= viewerData.width && imageData.height <= viewerData.height;\n    }\n  };\n\n  var AnotherViewer = WINDOW.Viewer;\n  var getUniqueID = function (id) {\n    return function () {\n      id += 1;\n      return id;\n    };\n  }(-1);\n  var Viewer = /*#__PURE__*/function () {\n    /**\n     * Create a new Viewer.\n     * @param {Element} element - The target element for viewing.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Viewer(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      _classCallCheck(this, Viewer);\n      if (!element || element.nodeType !== 1) {\n        throw new Error('The first argument is required and must be an element.');\n      }\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.action = false;\n      this.fading = false;\n      this.fulled = false;\n      this.hiding = false;\n      this.imageClicked = false;\n      this.imageData = {};\n      this.index = this.options.initialViewIndex;\n      this.isImg = false;\n      this.isShown = false;\n      this.length = 0;\n      this.moving = false;\n      this.played = false;\n      this.playing = false;\n      this.pointers = {};\n      this.ready = false;\n      this.rotating = false;\n      this.scaling = false;\n      this.showing = false;\n      this.timeout = false;\n      this.tooltipping = false;\n      this.viewed = false;\n      this.viewing = false;\n      this.wheeling = false;\n      this.zooming = false;\n      this.pointerMoved = false;\n      this.id = getUniqueID();\n      this.init();\n    }\n    _createClass(Viewer, [{\n      key: \"init\",\n      value: function init() {\n        var _this = this;\n        var element = this.element,\n          options = this.options;\n        if (element[NAMESPACE]) {\n          return;\n        }\n        element[NAMESPACE] = this;\n\n        // The `focus` option requires the `keyboard` option set to `true`.\n        if (options.focus && !options.keyboard) {\n          options.focus = false;\n        }\n        var isImg = element.localName === 'img';\n        var images = [];\n        forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n          if (isFunction(options.filter)) {\n            if (options.filter.call(_this, image)) {\n              images.push(image);\n            }\n          } else if (_this.getImageURL(image)) {\n            images.push(image);\n          }\n        });\n        this.isImg = isImg;\n        this.length = images.length;\n        this.images = images;\n        this.initBody();\n\n        // Override `transition` option if it is not supported\n        if (isUndefined(document.createElement(NAMESPACE).style.transition)) {\n          options.transition = false;\n        }\n        if (options.inline) {\n          var count = 0;\n          var progress = function progress() {\n            count += 1;\n            if (count === _this.length) {\n              var timeout;\n              _this.initializing = false;\n              _this.delaying = {\n                abort: function abort() {\n                  clearTimeout(timeout);\n                }\n              };\n\n              // build asynchronously to keep `this.viewer` is accessible in `ready` event handler.\n              timeout = setTimeout(function () {\n                _this.delaying = false;\n                _this.build();\n              }, 0);\n            }\n          };\n          this.initializing = {\n            abort: function abort() {\n              forEach(images, function (image) {\n                if (!image.complete) {\n                  removeListener(image, EVENT_LOAD, progress);\n                  removeListener(image, EVENT_ERROR, progress);\n                }\n              });\n            }\n          };\n          forEach(images, function (image) {\n            if (image.complete) {\n              progress();\n            } else {\n              var onLoad;\n              var onError;\n              addListener(image, EVENT_LOAD, onLoad = function onLoad() {\n                removeListener(image, EVENT_ERROR, onError);\n                progress();\n              }, {\n                once: true\n              });\n              addListener(image, EVENT_ERROR, onError = function onError() {\n                removeListener(image, EVENT_LOAD, onLoad);\n                progress();\n              }, {\n                once: true\n              });\n            }\n          });\n        } else {\n          addListener(element, EVENT_CLICK, this.onStart = function (_ref) {\n            var target = _ref.target;\n            if (target.localName === 'img' && (!isFunction(options.filter) || options.filter.call(_this, target))) {\n              _this.view(_this.images.indexOf(target));\n            }\n          });\n        }\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (this.ready) {\n          return;\n        }\n        var element = this.element,\n          options = this.options;\n        var parent = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var viewer = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var title = viewer.querySelector(\".\".concat(NAMESPACE, \"-title\"));\n        var toolbar = viewer.querySelector(\".\".concat(NAMESPACE, \"-toolbar\"));\n        var navbar = viewer.querySelector(\".\".concat(NAMESPACE, \"-navbar\"));\n        var button = viewer.querySelector(\".\".concat(NAMESPACE, \"-button\"));\n        var canvas = viewer.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        this.parent = parent;\n        this.viewer = viewer;\n        this.title = title;\n        this.toolbar = toolbar;\n        this.navbar = navbar;\n        this.button = button;\n        this.canvas = canvas;\n        this.footer = viewer.querySelector(\".\".concat(NAMESPACE, \"-footer\"));\n        this.tooltipBox = viewer.querySelector(\".\".concat(NAMESPACE, \"-tooltip\"));\n        this.player = viewer.querySelector(\".\".concat(NAMESPACE, \"-player\"));\n        this.list = viewer.querySelector(\".\".concat(NAMESPACE, \"-list\"));\n        viewer.id = \"\".concat(NAMESPACE).concat(this.id);\n        title.id = \"\".concat(NAMESPACE, \"Title\").concat(this.id);\n        addClass(title, !options.title ? CLASS_HIDE : getResponsiveClass(Array.isArray(options.title) ? options.title[0] : options.title));\n        addClass(navbar, !options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));\n        toggleClass(button, CLASS_HIDE, !options.button);\n        if (options.keyboard) {\n          button.setAttribute('tabindex', 0);\n        }\n        if (options.backdrop) {\n          addClass(viewer, \"\".concat(NAMESPACE, \"-backdrop\"));\n          if (!options.inline && options.backdrop !== 'static') {\n            setData(canvas, DATA_ACTION, 'hide');\n          }\n        }\n        if (isString(options.className) && options.className) {\n          // In case there are multiple class names\n          options.className.split(REGEXP_SPACES).forEach(function (className) {\n            addClass(viewer, className);\n          });\n        }\n        if (options.toolbar) {\n          var list = document.createElement('ul');\n          var custom = isPlainObject(options.toolbar);\n          var zoomButtons = BUTTONS.slice(0, 3);\n          var rotateButtons = BUTTONS.slice(7, 9);\n          var scaleButtons = BUTTONS.slice(9);\n          if (!custom) {\n            addClass(toolbar, getResponsiveClass(options.toolbar));\n          }\n          forEach(custom ? options.toolbar : BUTTONS, function (value, index) {\n            var deep = custom && isPlainObject(value);\n            var name = custom ? hyphenate(index) : value;\n            var show = deep && !isUndefined(value.show) ? value.show : value;\n            if (!show || !options.zoomable && zoomButtons.indexOf(name) !== -1 || !options.rotatable && rotateButtons.indexOf(name) !== -1 || !options.scalable && scaleButtons.indexOf(name) !== -1) {\n              return;\n            }\n            var size = deep && !isUndefined(value.size) ? value.size : value;\n            var click = deep && !isUndefined(value.click) ? value.click : value;\n            var item = document.createElement('li');\n            if (options.keyboard) {\n              item.setAttribute('tabindex', 0);\n            }\n            item.setAttribute('role', 'button');\n            addClass(item, \"\".concat(NAMESPACE, \"-\").concat(name));\n            if (!isFunction(click)) {\n              setData(item, DATA_ACTION, name);\n            }\n            if (isNumber(show)) {\n              addClass(item, getResponsiveClass(show));\n            }\n            if (['small', 'large'].indexOf(size) !== -1) {\n              addClass(item, \"\".concat(NAMESPACE, \"-\").concat(size));\n            } else if (name === 'play') {\n              addClass(item, \"\".concat(NAMESPACE, \"-large\"));\n            }\n            if (isFunction(click)) {\n              addListener(item, EVENT_CLICK, click);\n            }\n            list.appendChild(item);\n          });\n          toolbar.appendChild(list);\n        } else {\n          addClass(toolbar, CLASS_HIDE);\n        }\n        if (!options.rotatable) {\n          var rotates = toolbar.querySelectorAll('li[class*=\"rotate\"]');\n          addClass(rotates, CLASS_INVISIBLE);\n          forEach(rotates, function (rotate) {\n            toolbar.appendChild(rotate);\n          });\n        }\n        if (options.inline) {\n          addClass(button, CLASS_FULLSCREEN);\n          setStyle(viewer, {\n            zIndex: options.zIndexInline\n          });\n          if (window.getComputedStyle(parent).position === 'static') {\n            setStyle(parent, {\n              position: 'relative'\n            });\n          }\n          parent.insertBefore(viewer, element.nextSibling);\n        } else {\n          addClass(button, CLASS_CLOSE);\n          addClass(viewer, CLASS_FIXED);\n          addClass(viewer, CLASS_FADE);\n          addClass(viewer, CLASS_HIDE);\n          setStyle(viewer, {\n            zIndex: options.zIndex\n          });\n          var container = options.container;\n          if (isString(container)) {\n            container = element.ownerDocument.querySelector(container);\n          }\n          if (!container) {\n            container = this.body;\n          }\n          container.appendChild(viewer);\n        }\n        if (options.inline) {\n          this.render();\n          this.bind();\n          this.isShown = true;\n        }\n        this.ready = true;\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n        if (dispatchEvent(element, EVENT_READY) === false) {\n          this.ready = false;\n          return;\n        }\n        if (this.ready && options.inline) {\n          this.view(this.index);\n        }\n      }\n\n      /**\n       * Get the no conflict viewer class.\n       * @returns {Viewer} The viewer class.\n       */\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Viewer = AnotherViewer;\n        return Viewer;\n      }\n\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n    return Viewer;\n  }();\n  assign(Viewer.prototype, render, events, handlers, methods, others);\n\n  return Viewer;\n\n}));\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}